<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë°ì¼ë¦¬ ì—…ë¬´ê³„íší‘œ</title>
  
  <!-- PWA ì„¤ì • -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#A8E6CF">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ì—…ë¬´ê³„íš">
  
  <!-- í°íŠ¸ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  
  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    :root {
      /* ìƒ‰ìƒ íŒ”ë ˆíŠ¸ - Soft & Pastel */
      --color-mint-50: #F0FDF9;
      --color-mint-100: #CCFBEF;
      --color-mint-200: #99F6E0;
      --color-mint-300: #5FE9CE;
      --color-mint-400: #2DD4B8;
      --color-mint-500: #14B8A6;
      --color-mint-600: #0D9488;
      
      --color-lavender-50: #F5F3FF;
      --color-lavender-100: #EDE9FE;
      --color-lavender-200: #DDD6FE;
      --color-lavender-300: #C4B5FD;
      --color-lavender-400: #A78BFA;
      --color-lavender-500: #8B5CF6;
      
      --color-peach-50: #FFF7ED;
      --color-peach-100: #FFEDD5;
      --color-peach-200: #FED7AA;
      --color-peach-300: #FDBA74;
      --color-peach-400: #FB923C;
      
      --color-rose-50: #FFF1F2;
      --color-rose-100: #FFE4E6;
      --color-rose-200: #FECDD3;
      --color-rose-300: #FDA4AF;
      --color-rose-400: #FB7185;
      
      --color-gray-50: #FAFAF9;
      --color-gray-100: #F5F5F4;
      --color-gray-200: #E7E5E4;
      --color-gray-300: #D6D3D1;
      --color-gray-400: #A8A29E;
      --color-gray-500: #78716C;
      --color-gray-600: #57534E;
      --color-gray-700: #44403C;
      --color-gray-800: #292524;
      
      /* íƒ€ì´í¬ê·¸ë˜í”¼ */
      --font-display: 'Outfit', 'Noto Sans KR', sans-serif;
      --font-body: 'Noto Sans KR', sans-serif;
      
      /* ê°„ê²© */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
      --space-3xl: 64px;
      
      /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-xl: 20px;
      --radius-2xl: 24px;
      --radius-full: 9999px;
      
      /* ê·¸ë¦¼ì */
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.06), 0 4px 6px -2px rgba(0, 0, 0, 0.04);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.08), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      background: linear-gradient(135deg, var(--color-mint-50) 0%, var(--color-lavender-50) 100%);
      color: var(--color-gray-800);
      line-height: 1.6;
      min-height: 100vh;
    }

    #root {
      width: 100%;
      min-height: 100vh;
    }

    /* ìŠ¤í¬ë¡¤ë°” - ë” ì˜ˆì˜ê²Œ */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }
    ::-webkit-scrollbar-track {
      background: var(--color-gray-100);
      border-radius: var(--radius-full);
    }
    ::-webkit-scrollbar-thumb {
      background: var(--color-mint-300);
      border-radius: var(--radius-full);
      border: 2px solid var(--color-gray-100);
    }
    ::-webkit-scrollbar-thumb:hover {
      background: var(--color-mint-400);
    }

    /* ì• ë‹ˆë©”ì´ì…˜ */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideDown {
      from {
        transform: translateY(-20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.95);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      body {
        overflow-x: hidden;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // â­â­â­ ì—¬ê¸°ì— Firebase ì„¤ì •ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš” â­â­â­
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Firebase ì´ˆê¸°í™”
    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const database = firebase.database();

    // Icons
    const Icon = ({ name, size = 24, color = "currentColor", ...props }) => {
      const icons = {
        plus: <path d="M12 5v14m-7-7h14" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        trash: <path d="M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        calendar: <path d="M8 2v4m8-4v4M3 10h18M5 4h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        user: <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2m8-10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        users: <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2m22 0v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75M13 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        chevronRight: <path d="m9 18 6-6-6-6" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        chevronLeft: <path d="m15 18-6-6 6-6" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        refresh: <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        edit: <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
        x: <path d="M18 6 6 18M6 6l12 12" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" fill="none"/>,
      };
      return (
        <svg width={size} height={size} viewBox="0 0 24 24" {...props}>
          {icons[name]}
        </svg>
      );
    };

    const DailyPlanner = () => {
      const [projects, setProjects] = useState([]);
      const [selectedProject, setSelectedProject] = useState(null);
      const [currentWeek, setCurrentWeek] = useState(getWeekDates());
      const [currentMonth, setCurrentMonth] = useState(new Date());
      const [selectedDate, setSelectedDate] = useState(null);
      const [loading, setLoading] = useState(true);
      const [userName, setUserName] = useState('');
      const [showLoginModal, setShowLoginModal] = useState(false);
      const [showProjectModal, setShowProjectModal] = useState(false);
      const [showTaskModal, setShowTaskModal] = useState(false);
      const [showMemoModal, setShowMemoModal] = useState(false);
      const [newProjectName, setNewProjectName] = useState('');
      const [newTaskDescription, setNewTaskDescription] = useState('');
      const [taskModalData, setTaskModalData] = useState(null);
      const [selectedTask, setSelectedTask] = useState(null);
      const [taskMemo, setTaskMemo] = useState('');
      const [lastSync, setLastSync] = useState(new Date());

      const workHours = Array.from({ length: 10 }, (_, i) => i + 9);

      useEffect(() => {
        // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚¬ìš©ì ì´ë¦„ ë³µêµ¬
        const savedUserName = localStorage.getItem('daily-planner-username');
        if (savedUserName) {
          setUserName(savedUserName);
          setShowLoginModal(false);
        } else {
          setShowLoginModal(true);
        }

        // Firebase ì‹¤ì‹œê°„ ë°ì´í„° ë¦¬ìŠ¤ë„ˆ
        const projectsRef = database.ref('projects');
        
        projectsRef.on('value', (snapshot) => {
          const data = snapshot.val();
          if (data) {
            const projectsArray = Object.keys(data).map(key => ({
              id: key,
              ...data[key]
            }));
            setProjects(projectsArray);
            setLastSync(new Date());
          } else {
            setProjects([]);
          }
          setLoading(false);
        });

        // ìë™ ì •ë¦¬
        const cleanupInterval = setInterval(() => {
          cleanOldTasks();
        }, 60000);

        return () => {
          projectsRef.off();
          clearInterval(cleanupInterval);
        };
      }, []);

      function cleanOldTasks() {
        const fiveDaysAgo = new Date();
        fiveDaysAgo.setDate(fiveDaysAgo.getDate() - 5);
        fiveDaysAgo.setHours(0, 0, 0, 0);

        projects.forEach(project => {
          const updatedTasks = project.tasks.filter(task => {
            const taskDate = new Date(task.date);
            taskDate.setHours(0, 0, 0, 0);
            return taskDate >= fiveDaysAgo;
          });

          if (updatedTasks.length !== project.tasks.length) {
            database.ref(`projects/${project.id}/tasks`).set(updatedTasks);
          }
        });
      }

      function getWeekDates(baseDate = new Date()) {
        const dates = [];
        const dayOfWeek = baseDate.getDay();
        const monday = new Date(baseDate);
        monday.setDate(baseDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));

        for (let i = 0; i < 7; i++) {
          const date = new Date(monday);
          date.setDate(monday.getDate() + i);
          dates.push(date);
        }
        return dates;
      }

      function getMonthDates(date) {
        const year = date.getFullYear();
        const month = date.getMonth();
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        
        const dates = [];
        const startDay = firstDay.getDay();
        
        // ì´ì „ ë‹¬ ë‚ ì§œ
        for (let i = startDay - 1; i >= 0; i--) {
          const d = new Date(year, month, -i);
          dates.push({ date: d, isCurrentMonth: false });
        }
        
        // í˜„ì¬ ë‹¬ ë‚ ì§œ
        for (let i = 1; i <= lastDay.getDate(); i++) {
          dates.push({ date: new Date(year, month, i), isCurrentMonth: true });
        }
        
        // ë‹¤ìŒ ë‹¬ ë‚ ì§œ (6ì£¼ ì±„ìš°ê¸°)
        const remaining = 42 - dates.length;
        for (let i = 1; i <= remaining; i++) {
          dates.push({ date: new Date(year, month + 1, i), isCurrentMonth: false });
        }
        
        return dates;
      }

      function goToPreviousWeek() {
        const firstDay = currentWeek[0];
        const previousWeek = new Date(firstDay);
        previousWeek.setDate(firstDay.getDate() - 7);
        setCurrentWeek(getWeekDates(previousWeek));
      }

      function goToNextWeek() {
        const firstDay = currentWeek[0];
        const nextWeek = new Date(firstDay);
        nextWeek.setDate(firstDay.getDate() + 7);
        setCurrentWeek(getWeekDates(nextWeek));
      }

      function goToCurrentWeek() {
        setCurrentWeek(getWeekDates());
      }

      function goToPreviousMonth() {
        setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1));
      }

      function goToNextMonth() {
        setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1));
      }

      function goToCurrentMonth() {
        setCurrentMonth(new Date());
      }

      function addProject() {
        setNewProjectName('');
        setShowProjectModal(true);
      }

      async function handleAddProject() {
        if (!newProjectName.trim()) return;

        const newProject = {
          name: newProjectName.trim(),
          color: getRandomColor(),
          tasks: [],
          assignee: '',
          createdAt: Date.now(),
          createdBy: userName
        };

        try {
          const newProjectRef = database.ref('projects').push();
          await newProjectRef.set(newProject);
          setShowProjectModal(false);
          setNewProjectName('');
        } catch (error) {
          alert('í”„ë¡œì íŠ¸ ì¶”ê°€ ì‹¤íŒ¨: ' + error.message);
        }
      }

      async function deleteProject(projectId) {
        if (!confirm('ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
        
        try {
          await database.ref(`projects/${projectId}`).remove();
          if (selectedProject?.id === projectId) {
            setSelectedProject(null);
          }
        } catch (error) {
          alert('ì‚­ì œ ì‹¤íŒ¨: ' + error.message);
        }
      }

      async function updateProjectAssignee(projectId, assignee) {
        try {
          await database.ref(`projects/${projectId}/assignee`).set(assignee);
        } catch (error) {
          console.error('ë‹´ë‹¹ì ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
        }
      }

      function openTaskModal(projectId, date, hour) {
        setTaskModalData({ projectId, date, hour });
        setNewTaskDescription('');
        setShowTaskModal(true);
      }

      async function handleAddTask() {
        if (!newTaskDescription.trim() || !taskModalData) return;

        const { projectId, date, hour } = taskModalData;

        const task = {
          id: Date.now(),
          date: date.toISOString().split('T')[0],
          hour,
          description: newTaskDescription.trim(),
          status: 'pending',
          memo: '',
          createdBy: userName,
          createdAt: Date.now()
        };

        try {
          const project = projects.find(p => p.id === projectId);
          const updatedTasks = [...(project.tasks || []), task];
          await database.ref(`projects/${projectId}/tasks`).set(updatedTasks);
          
          setShowTaskModal(false);
          setNewTaskDescription('');
          setTaskModalData(null);
        } catch (error) {
          alert('ì—…ë¬´ ì¶”ê°€ ì‹¤íŒ¨: ' + error.message);
        }
      }

      async function updateTask(projectId, taskId, updates) {
        try {
          const project = projects.find(p => p.id === projectId);
          const updatedTasks = project.tasks.map(t => 
            t.id === taskId ? { ...t, ...updates } : t
          );
          await database.ref(`projects/${projectId}/tasks`).set(updatedTasks);
        } catch (error) {
          console.error('ì—…ë¬´ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
        }
      }

      async function deleteTask(projectId, taskId) {
        try {
          const project = projects.find(p => p.id === projectId);
          const updatedTasks = project.tasks.filter(t => t.id !== taskId);
          await database.ref(`projects/${projectId}/tasks`).set(updatedTasks);
        } catch (error) {
          alert('ì—…ë¬´ ì‚­ì œ ì‹¤íŒ¨: ' + error.message);
        }
      }

      function openMemoModal(projectId, task) {
        setSelectedTask({ projectId, task });
        setTaskMemo(task.memo || '');
        setShowMemoModal(true);
      }

      async function handleSaveMemo() {
        if (!selectedTask) return;

        try {
          await updateTask(selectedTask.projectId, selectedTask.task.id, { memo: taskMemo });
          setShowMemoModal(false);
          setSelectedTask(null);
          setTaskMemo('');
        } catch (error) {
          alert('ë©”ëª¨ ì €ì¥ ì‹¤íŒ¨: ' + error.message);
        }
      }

      function getRandomColor() {
        const colors = [
          '#A8E6CF', // ë¯¼íŠ¸
          '#FFD3B6', // í”¼ì¹˜
          '#FFAAA5', // ì½”ë„  
          '#FF8B94', // ë¡œì¦ˆ
          '#A8D8EA', // ìŠ¤ì¹´ì´ë¸”ë£¨
          '#C7CEEA', // ë¼ë²¤ë”
          '#B4A7D6', // í¼í”Œ
          '#FFB7B2', // ì—°í•‘í¬
          '#FFDAC1', // í¬ë¦¼
          '#A2E1DB'  // ì•„ì¿ ì•„
        ];
        return colors[Math.floor(Math.random() * colors.length)];
      }

      function getTasksForDateAndHour(projectId, date, hour) {
        const project = projects.find(p => p.id === projectId);
        if (!project || !project.tasks) return [];

        const dateStr = date.toISOString().split('T')[0];
        return project.tasks.filter(t => t.date === dateStr && t.hour === hour);
      }

      function getTasksForDate(date) {
        const dateStr = date.toISOString().split('T')[0];
        return projects.flatMap(project => {
          const projectTasks = (project.tasks || []).filter(t => t.date === dateStr);
          return projectTasks.map(task => ({ ...task, project }));
        });
      }

      function getProjectProgress(project) {
        if (!project.tasks || !project.tasks.length) return 0;
        const completed = project.tasks.filter(t => t.status === 'completed').length;
        return Math.round((completed / project.tasks.length) * 100);
      }

      function handleLogin() {
        if (!userName.trim()) {
          alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
          return;
        }
        // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
        localStorage.setItem('daily-planner-username', userName.trim());
        setShowLoginModal(false);
      }

      function handleLogout() {
        localStorage.removeItem('daily-planner-username');
        setUserName('');
        setShowLoginModal(true);
      }

      function formatLastSync() {
        const now = new Date();
        const diff = Math.floor((now - lastSync) / 1000);
        if (diff < 60) return 'ë°©ê¸ˆ ì „';
        if (diff < 3600) return `${Math.floor(diff / 60)}ë¶„ ì „`;
        return lastSync.toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
      }

      if (showLoginModal) {
        return (
          <div style={{
            minHeight: '100vh',
            background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            padding: '20px'
          }}>
            <div style={{
              background: 'white',
              borderRadius: '24px',
              padding: '48px',
              maxWidth: '440px',
              width: '100%',
              boxShadow: '0 20px 60px rgba(0,0,0,0.3)'
            }}>
              <div style={{
                width: '64px',
                height: '64px',
                background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                borderRadius: '16px',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                marginBottom: '24px'
              }}>
                <Icon name="calendar" size={32} color="white" />
              </div>
              
              <h1 style={{
                fontSize: '28px',
                fontWeight: '700',
                marginBottom: '8px',
                color: '#1a1a1a'
              }}>ë°ì¼ë¦¬ ì—…ë¬´ê³„íší‘œ</h1>
              
              <p style={{
                color: '#666',
                marginBottom: '32px',
                lineHeight: '1.6'
              }}>
                íŒ€ í”„ë¡œì íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê´€ë¦¬í•˜ì„¸ìš”.<br/>
                <strong style={{ color: '#667eea' }}>ğŸ”„ ì‹¤ì‹œê°„ ë™ê¸°í™” ì§€ì›</strong>
              </p>

              <div style={{ marginBottom: '24px' }}>
                <label style={{
                  display: 'block',
                  marginBottom: '8px',
                  fontWeight: '600',
                  color: '#333'
                }}>ì‚¬ìš©ì ì´ë¦„</label>
                <input
                  type="text"
                  value={userName}
                  onChange={(e) => setUserName(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && handleLogin()}
                  placeholder="í™ê¸¸ë™"
                  autoFocus
                  style={{
                    width: '100%',
                    padding: '14px 16px',
                    border: '2px solid #e0e0e0',
                    borderRadius: '12px',
                    fontSize: '16px',
                    outline: 'none'
                  }}
                />
              </div>

              <button
                onClick={handleLogin}
                style={{
                  width: '100%',
                  padding: '16px',
                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                  color: 'white',
                  border: 'none',
                  borderRadius: '12px',
                  fontSize: '16px',
                  fontWeight: '600',
                  cursor: 'pointer',
                  boxShadow: '0 4px 12px rgba(102, 126, 234, 0.4)'
                }}
              >
                ì‹œì‘í•˜ê¸°
              </button>

              <div style={{
                marginTop: '24px',
                padding: '16px',
                background: '#f0f7ff',
                borderRadius: '12px',
                fontSize: '13px',
                color: '#1e40af',
                border: '1px solid #bfdbfe'
              }}>
                <Icon name="users" size={16} style={{ marginRight: '8px', verticalAlign: 'middle' }} />
                Firebase ì‹¤ì‹œê°„ ê³µìœ  ë²„ì „ì…ë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨í•´ë„ ë¡œê·¸ì¸ ìƒíƒœê°€ ìœ ì§€ë©ë‹ˆë‹¤.
              </div>
            </div>
          </div>
        );
      }

      if (loading) {
        return (
          <div style={{
            minHeight: '100vh',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            background: 'linear-gradient(135deg, var(--color-mint-50) 0%, var(--color-lavender-50) 100%)',
            animation: 'fadeIn 0.3s ease-out'
          }}>
            <div style={{ textAlign: 'center' }}>
              <div style={{
                width: '64px',
                height: '64px',
                border: '5px solid var(--color-mint-100)',
                borderTop: '5px solid var(--color-mint-400)',
                borderRadius: '50%',
                animation: 'spin 1s linear infinite',
                margin: '0 auto 24px'
              }} />
              <p style={{ 
                fontFamily: 'var(--font-display)', 
                fontSize: '18px', 
                fontWeight: '600',
                color: 'var(--color-gray-600)',
                letterSpacing: '-0.01em'
              }}>
                ë°ì´í„° ë¡œë”© ì¤‘...
              </p>
            </div>
          </div>
        );
      }

      return (
        <div style={{ 
          minHeight: '100vh', 
          background: 'linear-gradient(135deg, var(--color-mint-50) 0%, var(--color-lavender-50) 100%)'
        }}>
          {/* Header */}
          <div style={{
            background: 'white',
            borderBottom: '1px solid var(--color-gray-200)',
            padding: 'var(--space-lg) var(--space-xl)',
            position: 'sticky',
            top: 0,
            zIndex: 50,
            boxShadow: 'var(--shadow-sm)',
            animation: 'slideDown 0.3s ease-out'
          }}>
            <div style={{
              maxWidth: '1400px',
              margin: '0 auto',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'space-between',
              flexWrap: 'wrap',
              gap: 'var(--space-md)'
            }}>
              <div style={{
                display: 'flex',
                alignItems: 'center',
                gap: 'var(--space-md)',
                cursor: 'pointer'
              }}>
                <div style={{
                  width: '48px',
                  height: '48px',
                  background: 'linear-gradient(135deg, var(--color-mint-400) 0%, var(--color-lavender-400) 100%)',
                  borderRadius: 'var(--radius-md)',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  transition: 'transform 0.2s'
                }}
                onMouseEnter={(e) => e.currentTarget.style.transform = 'rotate(-5deg) scale(1.05)'}
                onMouseLeave={(e) => e.currentTarget.style.transform = 'rotate(0) scale(1)'}
                >
                  <Icon name="calendar" size={24} color="white" />
                </div>
                <div>
                  <h1 style={{
                    fontFamily: 'var(--font-display)',
                    fontSize: '22px',
                    fontWeight: '800',
                    color: 'var(--color-gray-800)',
                    margin: 0,
                    letterSpacing: '-0.02em'
                  }}>ë°ì¼ë¦¬ ì—…ë¬´ê³„íší‘œ</h1>
                  <p style={{
                    fontSize: '13px',
                    color: 'var(--color-gray-500)',
                    margin: 0,
                    display: 'flex',
                    alignItems: 'center',
                    gap: 'var(--space-xs)'
                  }}>
                    <Icon name="refresh" size={12} />
                    {formatLastSync()}
                  </p>
                </div>
              </div>
              
              <div style={{
                display: 'flex',
                alignItems: 'center',
                gap: 'var(--space-md)'
              }}>
                <div style={{
                  display: 'flex',
                  alignItems: 'center',
                  gap: 'var(--space-sm)',
                  padding: '10px 18px',
                  background: 'var(--color-mint-50)',
                  borderRadius: 'var(--radius-full)',
                  border: '1px solid var(--color-mint-200)'
                }}>
                  <Icon name="user" size={18} color="var(--color-mint-600)" />
                  <span style={{ 
                    fontSize: '15px', 
                    fontWeight: '600',
                    color: 'var(--color-gray-700)'
                  }}>{userName}</span>
                </div>
                
                <button
                  onClick={handleLogout}
                  style={{
                    padding: '10px 20px',
                    background: 'white',
                    border: '1px solid var(--color-gray-300)',
                    borderRadius: 'var(--radius-full)',
                    fontSize: '14px',
                    fontWeight: '600',
                    cursor: 'pointer',
                    color: 'var(--color-gray-600)',
                    transition: 'all 0.2s'
                  }}
                  onMouseEnter={(e) => {
                    e.target.style.background = 'var(--color-gray-100)';
                    e.target.style.borderColor = 'var(--color-gray-400)';
                  }}
                  onMouseLeave={(e) => {
                    e.target.style.background = 'white';
                    e.target.style.borderColor = 'var(--color-gray-300)';
                  }}
                >
                  ë¡œê·¸ì•„ì›ƒ
                </button>
              </div>
            </div>
          </div>

          <div style={{ 
            maxWidth: '1400px',
            margin: '0 auto',
            padding: isMobile ? 'var(--space-lg)' : 'var(--space-2xl)',
            display: 'flex',
            gap: 'var(--space-2xl)',
            animation: 'fadeIn 0.5s ease-out'
          }}>
            {!isMobile && (
              <aside style={{ width: '360px', flexShrink: 0 }}>
                {/* í”„ë¡œì íŠ¸ í—¤ë” */}
                <div style={{
                  background: 'white',
                  borderRadius: 'var(--radius-xl)',
                  padding: 'var(--space-lg)',
                  marginBottom: 'var(--space-lg)',
                  boxShadow: 'var(--shadow-md)',
                  display: 'flex',
                  justifyContent: 'space-between',
                  alignItems: 'center'
                }}>
                  <h2 style={{
                    fontFamily: 'var(--font-display)',
                    fontSize: '20px',
                    fontWeight: '700',
                    color: 'var(--color-gray-800)',
                    margin: 0
                  }}>í”„ë¡œì íŠ¸</h2>
                
                  <button
                    onClick={addProject}
                    style={{
                      width: '44px',
                      height: '44px',
                      background: 'linear-gradient(135deg, var(--color-mint-400) 0%, var(--color-mint-500) 100%)',
                      border: 'none',
                      borderRadius: 'var(--radius-md)',
                      cursor: 'pointer',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      boxShadow: '0 4px 12px rgba(20, 184, 166, 0.25)',
                      transition: 'all 0.2s'
                    }}
                    onMouseEnter={(e) => {
                      e.target.style.transform = 'scale(1.05) rotate(90deg)';
                    }}
                    onMouseLeave={(e) => {
                      e.target.style.transform = 'scale(1) rotate(0)';
                    }}
                  >
                    <Icon name="plus" size={22} color="white" />
                  </button>
                </div>

              {/* í”„ë¡œì íŠ¸ ëª©ë¡ */}
              <div style={{ display: 'flex', flexDirection: 'column', gap: 'var(--space-md)' }}>
                {projects.length === 0 ? (
                  <div style={{
                    background: 'white',
                    borderRadius: 'var(--radius-xl)',
                    padding: 'var(--space-3xl)',
                    textAlign: 'center',
                    boxShadow: 'var(--shadow-md)'
                  }}>
                    <Icon name="calendar" size={56} color="var(--color-gray-300)" />
                    <p style={{
                      marginTop: 'var(--space-lg)',
                      color: 'var(--color-gray-500)',
                      fontSize: '15px'
                    }}>í”„ë¡œì íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</p>
                  </div>
                ) : (
                  {projects.map(project => {
                    const progress = getProjectProgress(project);
                    const isSelected = selectedProject?.id === project.id;
                    
                    return (
                      <div
                        key={project.id}
                        onClick={() => setSelectedProject(project)}
                        style={{
                          background: isSelected 
                            ? `linear-gradient(135deg, ${project.color}15 0%, ${project.color}25 100%)`
                            : 'white',
                          border: `2px solid ${isSelected ? project.color : 'var(--color-gray-200)'}`,
                          borderRadius: 'var(--radius-xl)',
                          padding: 'var(--space-lg)',
                          cursor: 'pointer',
                          transition: 'all 0.2s',
                          boxShadow: isSelected ? 'var(--shadow-lg)' : 'var(--shadow-sm)'
                        }}
                        onMouseEnter={(e) => {
                          if (!isSelected) {
                            e.currentTarget.style.borderColor = project.color;
                            e.currentTarget.style.boxShadow = 'var(--shadow-md)';
                            e.currentTarget.style.transform = 'translateY(-2px)';
                          }
                        }}
                        onMouseLeave={(e) => {
                          if (!isSelected) {
                            e.currentTarget.style.borderColor = 'var(--color-gray-200)';
                            e.currentTarget.style.boxShadow = 'var(--shadow-sm)';
                            e.currentTarget.style.transform = 'translateY(0)';
                          }
                        }}
                      >
                        <div style={{
                          display: 'flex',
                          justifyContent: 'space-between',
                          alignItems: 'start',
                          marginBottom: 'var(--space-md)'
                        }}>
                          <div style={{ flex: 1 }}>
                            <div style={{
                              display: 'flex',
                              alignItems: 'center',
                              gap: 'var(--space-sm)',
                              marginBottom: 'var(--space-xs)'
                            }}>
                              <div style={{
                                width: '12px',
                                height: '12px',
                                background: project.color,
                                borderRadius: '50%'
                              }} />
                              <h3 style={{
                                fontFamily: 'var(--font-display)',
                                fontSize: '17px',
                                fontWeight: '700',
                                color: 'var(--color-gray-800)',
                                margin: 0
                              }}>{project.name}</h3>
                            </div>
                            
                            {project.organization && (
                              <div style={{
                                display: 'flex',
                                alignItems: 'center',
                                gap: '6px',
                                marginBottom: '4px'
                              }}>
                                <Icon name="briefcase" size={13} color="var(--color-gray-500)" />
                                <span style={{ fontSize: '13px', color: 'var(--color-gray-600)' }}>
                                  {project.organization}
                                </span>
                              </div>
                            )}

                            {project.assignee && (
                              <div style={{
                                display: 'flex',
                                alignItems: 'center',
                                gap: '6px',
                                marginBottom: '4px'
                              }}>
                                <Icon name="user" size={13} color="var(--color-gray-500)" />
                                <span style={{ fontSize: '13px', color: 'var(--color-gray-600)' }}>
                                  {project.assignee}
                                </span>
                              </div>
                            )}

                            {project.startDate && project.endDate && (
                              <div style={{
                                display: 'flex',
                                alignItems: 'center',
                                gap: '6px'
                              }}>
                                <Icon name="calendar" size={13} color="var(--color-gray-500)" />
                                <span style={{ fontSize: '12px', color: 'var(--color-gray-500)' }}>
                                  {formatDateRange(project.startDate, project.endDate)}
                                </span>
                              </div>
                            )}
                          </div>
                          
                          <div style={{ display: 'flex', gap: '4px' }}>
                            <button
                              onClick={(e) => {
                                e.stopPropagation();
                                setEditingProject(project);
                                setNewProjectName(project.name);
                                setNewProjectOrganization(project.organization || '');
                                setNewProjectAssignee(project.assignee || '');
                                setNewProjectStartDate(project.startDate || '');
                                setNewProjectEndDate(project.endDate || '');
                                setShowEditProjectModal(true);
                              }}
                              style={{
                                background: 'white',
                                border: '1px solid var(--color-gray-300)',
                                borderRadius: 'var(--radius-sm)',
                                cursor: 'pointer',
                                padding: '6px',
                                display: 'flex',
                                transition: 'all 0.2s'
                              }}
                              onMouseEnter={(e) => {
                                e.target.style.background = 'var(--color-mint-50)';
                                e.target.style.borderColor = 'var(--color-mint-300)';
                              }}
                              onMouseLeave={(e) => {
                                e.target.style.background = 'white';
                                e.target.style.borderColor = 'var(--color-gray-300)';
                              }}
                            >
                              <Icon name="edit" size={14} color="var(--color-mint-600)" />
                            </button>
                            <button
                              onClick={(e) => {
                                e.stopPropagation();
                                deleteProject(project.id);
                              }}
                              style={{
                                background: 'white',
                                border: '1px solid var(--color-gray-300)',
                                borderRadius: 'var(--radius-sm)',
                                cursor: 'pointer',
                                padding: '6px',
                                display: 'flex',
                                transition: 'all 0.2s'
                              }}
                              onMouseEnter={(e) => {
                                e.target.style.background = 'var(--color-rose-50)';
                                e.target.style.borderColor = 'var(--color-rose-300)';
                              }}
                              onMouseLeave={(e) => {
                                e.target.style.background = 'white';
                                e.target.style.borderColor = 'var(--color-gray-300)';
                              }}
                            >
                              <Icon name="trash" size={14} color="var(--color-rose-500)" />
                            </button>
                          </div>
                        </div>

                        {/* ì§„í–‰ë¥  */}
                        <div style={{ marginTop: 'var(--space-md)' }}>
                          <div style={{
                            display: 'flex',
                            justifyContent: 'space-between',
                            fontSize: '13px',
                            color: 'var(--color-gray-600)',
                            marginBottom: 'var(--space-sm)'
                          }}>
                            <span>ì§„í–‰ë¥ </span>
                            <span style={{ fontWeight: '700', color: project.color }}>
                              {progress}%
                            </span>
                          </div>
                          <div style={{
                            height: '8px',
                            background: 'var(--color-gray-200)',
                            borderRadius: 'var(--radius-full)',
                            overflow: 'hidden'
                          }}>
                            <div style={{
                              width: `${progress}%`,
                              height: '100%',
                              background: project.color,
                              transition: 'width 0.5s ease'
                            }} />
                          </div>
                        </div>

                        {/* ì—…ë¬´ ê°œìˆ˜ */}
                        <div style={{
                          marginTop: 'var(--space-md)',
                          fontSize: '13px',
                          color: 'var(--color-gray-500)'
                        }}>
                          ğŸ“ {project.tasks?.length || 0}ê°œ ì—…ë¬´
                        </div>
                      </div>
                    );
                  })}
                </div>
              )}
              </aside>
            )}

            {/* Main Content */}
            <main style={{ flex: 1 }}>
              {!selectedProject && !selectedDate ? (
                // ì›”ê°„ ìº˜ë¦°ë” ë·°
                <div>
                  <div style={{
                    background: 'white',
                    padding: 'var(--space-2xl)',
                    borderRadius: 'var(--radius-2xl)',
                    marginBottom: 'var(--space-xl)',
                    boxShadow: 'var(--shadow-md)',
                    animation: 'slideUp 0.3s ease-out'
                  }}>
                    <h2 style={{
                      fontFamily: 'var(--font-display)',
                      fontSize: '28px',
                      fontWeight: '800',
                      color: 'var(--color-gray-800)',
                      margin: 0,
                      letterSpacing: '-0.02em'
                    }}>ì „ì²´ í”„ë¡œì íŠ¸ í˜„í™©</h2>
                    <p style={{
                      fontSize: '15px',
                      color: 'var(--color-gray-600)',
                      marginTop: 'var(--space-sm)',
                      lineHeight: '1.6'
                    }}>ì›”ê°„ ìº˜ë¦°ë”ì—ì„œ ë‚ ì§œë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ì¼ì˜ ìƒì„¸ ì¼ì •ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                    
                    {isMobile && (
                      <button
                        onClick={() => setShowMobileProjectList(!showMobileProjectList)}
                        style={{
                          marginTop: 'var(--space-lg)',
                          width: '100%',
                          padding: '14px 20px',
                          background: 'linear-gradient(135deg, var(--color-mint-400) 0%, var(--color-mint-500) 100%)',
                          border: 'none',
                          borderRadius: 'var(--radius-lg)',
                          fontSize: '15px',
                          fontWeight: '600',
                          cursor: 'pointer',
                          color: 'white',
                          boxShadow: '0 4px 12px rgba(20, 184, 166, 0.25)',
                          display: 'flex',
                          alignItems: 'center',
                          justifyContent: 'center',
                          gap: 'var(--space-sm)',
                          transition: 'all 0.2s'
                        }}
                      >
                        <Icon name="chevronRight" size={18} />
                        í”„ë¡œì íŠ¸ ì„ íƒ
                      </button>
                    )}
                  </div>

                  {/* Month Navigation */}
                  <div style={{
                    background: 'white',
                    padding: 'var(--space-lg) var(--space-xl)',
                    borderRadius: 'var(--radius-xl)',
                    marginBottom: 'var(--space-lg)',
                    boxShadow: 'var(--shadow-md)',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'space-between',
                    gap: 'var(--space-md)',
                    flexWrap: 'wrap'
                  }}>
                    <button
                      onClick={goToPreviousMonth}
                      style={{
                        padding: '12px 24px',
                        background: 'var(--color-gray-50)',
                        border: '1px solid var(--color-gray-300)',
                        borderRadius: 'var(--radius-lg)',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        color: 'var(--color-gray-700)',
                        display: 'flex',
                        alignItems: 'center',
                        gap: 'var(--space-sm)',
                        transition: 'all 0.2s'
                      }}
                      onMouseEnter={(e) => {
                        e.target.style.background = 'var(--color-gray-100)';
                      }}
                      onMouseLeave={(e) => {
                        e.target.style.background = 'var(--color-gray-50)';
                      }}
                    >
                      <Icon name="chevronLeft" size={18} />
                      ì´ì „ ë‹¬
                    </button>

                    <div style={{
                      fontFamily: 'var(--font-display)',
                      fontSize: '20px',
                      fontWeight: '700',
                      color: 'var(--color-gray-800)',
                      letterSpacing: '-0.01em'
                    }}>
                      {currentMonth.getFullYear()}ë…„ {currentMonth.getMonth() + 1}ì›”
                    </div>

                    <button
                      onClick={goToNextMonth}
                      style={{
                        padding: '12px 24px',
                        background: 'var(--color-gray-50)',
                        border: '1px solid var(--color-gray-300)',
                        borderRadius: 'var(--radius-lg)',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        color: 'var(--color-gray-700)',
                        display: 'flex',
                        alignItems: 'center',
                        gap: 'var(--space-sm)',
                        transition: 'all 0.2s'
                      }}
                      onMouseEnter={(e) => {
                        e.target.style.background = 'var(--color-gray-100)';
                      }}
                      onMouseLeave={(e) => {
                        e.target.style.background = 'var(--color-gray-50)';
                      }}
                    >
                      ë‹¤ìŒ ë‹¬
                      <Icon name="chevronRight" size={18} />
                    </button>
                  </div>

                  {/* Month Calendar */}
                  <div style={{
                    background: 'white',
                    borderRadius: 'var(--radius-2xl)',
                    overflow: 'hidden',
                    boxShadow: 'var(--shadow-lg)',
                    padding: 'var(--space-xl)'
                  }}>
                    {/* Day headers */}
                    <div style={{
                      display: 'grid',
                      gridTemplateColumns: 'repeat(7, 1fr)',
                      marginBottom: 'var(--space-md)',
                      gap: 'var(--space-xs)'
                    }}>
                      {['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '].map((day, idx) => (
                        <div
                          key={idx}
                          style={{
                            textAlign: 'center',
                            padding: 'var(--space-md)',
                            fontSize: '14px',
                            fontWeight: '700',
                            fontFamily: 'var(--font-display)',
                            color: idx === 0 ? 'var(--color-rose-400)' : idx === 6 ? 'var(--color-lavender-400)' : 'var(--color-gray-700)'
                          }}
                        >
                          {day}
                        </div>
                      ))}
                    </div>

                    {/* Calendar dates */}
                    <div style={{
                      display: 'grid',
                      gridTemplateColumns: 'repeat(7, 1fr)',
                      gap: 'var(--space-sm)'
                    }}>
                      {getMonthDates(currentMonth).map(({ date, isCurrentMonth }, idx) => {
                        const tasks = getTasksForDate(date);
                        const isToday = date.toDateString() === new Date().toDateString();
                        
                        return (
                          <div
                            key={idx}
                            onClick={() => isCurrentMonth && setSelectedDate(date)}
                            style={{
                              minHeight: '100px',
                              padding: 'var(--space-md)',
                              border: `2px solid ${isToday ? 'var(--color-mint-400)' : 'var(--color-gray-200)'}`,
                              borderRadius: 'var(--radius-lg)',
                              cursor: isCurrentMonth ? 'pointer' : 'default',
                              background: isCurrentMonth ? (isToday ? 'var(--color-mint-50)' : 'white') : 'var(--color-gray-50)',
                              transition: 'all 0.2s',
                              opacity: isCurrentMonth ? 1 : 0.4
                            }}
                            onMouseEnter={(e) => {
                              if (isCurrentMonth) {
                                e.currentTarget.style.borderColor = 'var(--color-mint-400)';
                                e.currentTarget.style.boxShadow = 'var(--shadow-md)';
                                e.currentTarget.style.transform = 'translateY(-2px)';
                              }
                            }}
                            onMouseLeave={(e) => {
                              if (isCurrentMonth && !isToday) {
                                e.currentTarget.style.borderColor = 'var(--color-gray-200)';
                                e.currentTarget.style.boxShadow = 'none';
                                e.currentTarget.style.transform = 'translateY(0)';
                              }
                            }}
                          >
                            <div style={{
                              fontSize: '16px',
                              fontWeight: isToday ? '700' : '600',
                              fontFamily: 'var(--font-display)',
                              color: isToday ? 'var(--color-mint-600)' : isCurrentMonth ? 'var(--color-gray-800)' : 'var(--color-gray-400)',
                              marginBottom: 'var(--space-sm)'
                            }}>
                              {date.getDate()}
                            </div>
                            
                            <div style={{
                              display: 'flex',
                              flexDirection: 'column',
                              gap: 'var(--space-xs)'
                            }}>
                              {tasks.slice(0, 3).map(({ project, ...task }) => (
                                <div
                                  key={task.id}
                                  style={{
                                    fontSize: '11px',
                                    padding: '4px 6px',
                                    background: `${project.color}25`,
                                    color: 'var(--color-gray-800)',
                                    borderLeft: `3px solid ${project.color}`,
                                    borderRadius: '4px',
                                    overflow: 'hidden',
                                    textOverflow: 'ellipsis',
                                    whiteSpace: 'nowrap',
                                    fontWeight: '500',
                                    textDecoration: task.status === 'completed' ? 'line-through' : 'none',
                                    opacity: task.status === 'completed' ? 0.6 : 1
                                  }}
                                >
                                  {task.description}
                                </div>
                              ))}
                              {tasks.length > 3 && (
                                <div style={{
                                  fontSize: '11px',
                                  color: 'var(--color-gray-500)',
                                  textAlign: 'center',
                                  fontWeight: '600',
                                  padding: 'var(--space-xs) 0'
                                }}>
                                  +{tasks.length - 3}ê°œ ë”
                                </div>
                              )}
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                </div>
              ) : selectedDate ? (
                // ì¼ì¼ ë·°
                <div>
                  <div style={{
                    background: 'white',
                    padding: '20px 24px',
                    borderRadius: '12px',
                    marginBottom: '24px',
                    boxShadow: '0 1px 3px rgba(0,0,0,0.05)',
                    display: 'flex',
                    justifyContent: 'space-between',
                    alignItems: 'center'
                  }}>
                    <div>
                      <h2 style={{
                        fontSize: '24px',
                        fontWeight: '700',
                        color: '#1a1a1a',
                        margin: 0
                      }}>
                        {selectedDate.toLocaleDateString('ko-KR', { 
                          year: 'numeric',
                          month: 'long',
                          day: 'numeric',
                          weekday: 'long'
                        })}
                      </h2>
                      <p style={{
                        fontSize: '14px',
                        color: '#666',
                        marginTop: '4px'
                      }}>ì¼ì¼ ìƒì„¸ ì¼ì •</p>
                    </div>
                    
                    <button
                      onClick={() => setSelectedDate(null)}
                      style={{
                        padding: '8px 16px',
                        background: '#f1f3f5',
                        border: 'none',
                        borderRadius: '8px',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        color: '#666'
                      }}
                    >
                      â† ìº˜ë¦°ë”ë¡œ
                    </button>
                  </div>

                  {/* Daily Schedule */}
                  <div style={{
                    background: 'white',
                    borderRadius: '12px',
                    overflow: 'hidden',
                    boxShadow: '0 1px 3px rgba(0,0,0,0.05)'
                  }}>
                    {workHours.map((hour) => {
                      const hourTasks = projects.flatMap(project => {
                        const dateStr = selectedDate.toISOString().split('T')[0];
                        const projectTasks = (project.tasks || []).filter(t => t.date === dateStr && t.hour === hour);
                        return projectTasks.map(task => ({ ...task, project }));
                      });

                      return (
                        <div
                          key={hour}
                          style={{
                            borderBottom: '1px solid #e5e7eb',
                            padding: '16px 24px'
                          }}
                        >
                          <div style={{
                            fontSize: '16px',
                            fontWeight: '600',
                            color: '#667eea',
                            marginBottom: '12px'
                          }}>
                            {hour}:00
                          </div>
                          
                          {hourTasks.length === 0 ? (
                            <div style={{
                              fontSize: '14px',
                              color: '#999',
                              fontStyle: 'italic'
                            }}>
                              ì˜ˆì •ëœ ì—…ë¬´ ì—†ìŒ
                            </div>
                          ) : (
                            <div style={{
                              display: 'flex',
                              flexDirection: 'column',
                              gap: '8px'
                            }}>
                              {hourTasks.map(({ project, ...task }) => (
                                <div
                                  key={task.id}
                                  style={{
                                    padding: '12px',
                                    background: `${project.color}15`,
                                    borderLeft: `4px solid ${project.color}`,
                                    borderRadius: '8px'
                                  }}
                                >
                                  <div style={{
                                    display: 'flex',
                                    justifyContent: 'space-between',
                                    alignItems: 'start',
                                    marginBottom: '8px'
                                  }}>
                                    <div style={{ flex: 1 }}>
                                      <div style={{
                                        fontSize: '12px',
                                        color: project.color,
                                        fontWeight: '600',
                                        marginBottom: '4px'
                                      }}>
                                        {project.name}
                                      </div>
                                      <div
                                        onClick={() => updateTask(project.id, task.id, { 
                                          status: task.status === 'completed' ? 'pending' : 'completed' 
                                        })}
                                        style={{
                                          fontSize: '15px',
                                          color: '#1a1a1a',
                                          cursor: 'pointer',
                                          textDecoration: task.status === 'completed' ? 'line-through' : 'none',
                                          opacity: task.status === 'completed' ? 0.6 : 1
                                        }}
                                      >
                                        {task.description}
                                      </div>
                                      {task.memo && (
                                        <div style={{
                                          fontSize: '13px',
                                          color: '#666',
                                          marginTop: '8px',
                                          padding: '8px',
                                          background: 'white',
                                          borderRadius: '4px'
                                        }}>
                                          ğŸ“ {task.memo}
                                        </div>
                                      )}
                                    </div>
                                    
                                    <div style={{
                                      display: 'flex',
                                      gap: '4px'
                                    }}>
                                      <button
                                        onClick={() => openMemoModal(project.id, task)}
                                        style={{
                                          background: 'white',
                                          border: '1px solid #e5e7eb',
                                          borderRadius: '6px',
                                          cursor: 'pointer',
                                          padding: '6px',
                                          display: 'flex',
                                          alignItems: 'center'
                                        }}
                                        title="ë©”ëª¨"
                                      >
                                        <Icon name="edit" size={14} color={project.color} />
                                      </button>
                                      <button
                                        onClick={() => deleteTask(project.id, task.id)}
                                        style={{
                                          background: 'white',
                                          border: '1px solid #e5e7eb',
                                          borderRadius: '6px',
                                          cursor: 'pointer',
                                          padding: '6px',
                                          display: 'flex',
                                          alignItems: 'center'
                                        }}
                                        title="ì‚­ì œ"
                                      >
                                        <Icon name="trash" size={14} color="#ff4444" />
                                      </button>
                                    </div>
                                  </div>
                                  
                                  <div style={{
                                    fontSize: '11px',
                                    color: '#999'
                                  }}>
                                    ì‘ì„±: {task.createdBy}
                                  </div>
                                </div>
                              ))}
                            </div>
                          )}
                        </div>
                      );
                    })}
                  </div>
                </div>
              ) : (
                // í”„ë¡œì íŠ¸ ì„ íƒ ì‹œ ì£¼ê°„ ìº˜ë¦°ë” (ê¸°ì¡´ ì½”ë“œ)
                <div>
                  <div style={{
                    background: 'white',
                    padding: '20px 24px',
                    borderRadius: '12px',
                    marginBottom: '24px',
                    boxShadow: '0 1px 3px rgba(0,0,0,0.05)'
                  }}>
                    <div style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '12px'
                    }}>
                      <div style={{
                        width: '12px',
                        height: '12px',
                        background: selectedProject.color,
                        borderRadius: '50%'
                      }} />
                      <h2 style={{
                        fontSize: '24px',
                        fontWeight: '700',
                        color: '#1a1a1a',
                        margin: 0
                      }}>{selectedProject.name}</h2>
                      {selectedProject.assignee && (
                        <div style={{
                          padding: '4px 12px',
                          background: '#f8f9fa',
                          borderRadius: '6px',
                          fontSize: '13px',
                          color: '#666'
                        }}>
                          ë‹´ë‹¹: {selectedProject.assignee}
                        </div>
                      )}
                    </div>
                  </div>

                  {/* Week Navigation */}
                  <div style={{
                    background: 'white',
                    padding: '16px 24px',
                    borderRadius: '12px',
                    marginBottom: '16px',
                    boxShadow: '0 1px 3px rgba(0,0,0,0.05)',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'space-between'
                  }}>
                    <button
                      onClick={goToPreviousWeek}
                      style={{
                        padding: '10px 20px',
                        background: '#f8f9fa',
                        border: '1px solid #e5e7eb',
                        borderRadius: '10px',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        color: '#495057',
                        display: 'flex',
                        alignItems: 'center',
                        gap: '8px'
                      }}
                    >
                      <Icon name="chevronLeft" size={18} />
                      ì´ì „ ì£¼
                    </button>

                    <div style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '16px'
                    }}>
                      <div style={{
                        fontSize: '16px',
                        fontWeight: '600',
                        color: '#1a1a1a'
                      }}>
                        {currentWeek[0].toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })} 
                        {' ~ '}
                        {currentWeek[6].toLocaleDateString('ko-KR', { month: 'long', day: 'numeric' })}
                      </div>
                      
                      <button
                        onClick={goToCurrentWeek}
                        style={{
                          padding: '6px 16px',
                          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                          border: 'none',
                          borderRadius: '8px',
                          fontSize: '13px',
                          fontWeight: '600',
                          cursor: 'pointer',
                          color: 'white',
                          boxShadow: '0 2px 8px rgba(102, 126, 234, 0.3)'
                        }}
                      >
                        ì´ë²ˆ ì£¼
                      </button>
                    </div>

                    <button
                      onClick={goToNextWeek}
                      style={{
                        padding: '10px 20px',
                        background: '#f8f9fa',
                        border: '1px solid #e5e7eb',
                        borderRadius: '10px',
                        fontSize: '14px',
                        fontWeight: '600',
                        cursor: 'pointer',
                        color: '#495057',
                        display: 'flex',
                        alignItems: 'center',
                        gap: '8px'
                      }}
                    >
                      ë‹¤ìŒ ì£¼
                      <Icon name="chevronRight" size={18} />
                    </button>
                  </div>

                  {/* Week Calendar */}
                  <div style={{
                    background: 'white',
                    borderRadius: '12px',
                    overflow: 'hidden',
                    boxShadow: '0 1px 3px rgba(0,0,0,0.05)'
                  }}>
                    <div style={{
                      display: 'grid',
                      gridTemplateColumns: '80px repeat(7, 1fr)',
                      background: '#f8f9fa',
                      borderBottom: '2px solid #e5e7eb'
                    }}>
                      <div style={{
                        padding: '16px',
                        borderRight: '1px solid #e5e7eb',
                        fontSize: '13px',
                        fontWeight: '600',
                        color: '#666'
                      }}>
                        ì‹œê°„
                      </div>
                      {currentWeek.map((date, idx) => {
                        const isToday = date.toDateString() === new Date().toDateString();
                        const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
                        
                        return (
                          <div
                            key={idx}
                            style={{
                              padding: '16px 8px',
                              textAlign: 'center',
                              borderRight: idx < 6 ? '1px solid #e5e7eb' : 'none',
                              background: isToday ? selectedProject.color : 'transparent',
                              color: isToday ? 'white' : '#1a1a1a',
                              cursor: 'pointer'
                            }}
                            onClick={() => setSelectedDate(date)}
                          >
                            <div style={{
                              fontSize: '12px',
                              fontWeight: '500',
                              opacity: isToday ? 1 : 0.7,
                              marginBottom: '4px'
                            }}>
                              {dayNames[date.getDay()]}
                            </div>
                            <div style={{
                              fontSize: '16px',
                              fontWeight: '700'
                            }}>
                              {date.getDate()}
                            </div>
                          </div>
                        );
                      })}
                    </div>

                    {workHours.map((hour) => (
                      <div
                        key={hour}
                        style={{
                          display: 'grid',
                          gridTemplateColumns: '80px repeat(7, 1fr)',
                          borderBottom: '1px solid #e5e7eb'
                        }}
                      >
                        <div style={{
                          padding: '12px 16px',
                          borderRight: '1px solid #e5e7eb',
                          fontSize: '14px',
                          fontWeight: '500',
                          color: '#666',
                          background: '#fafafa'
                        }}>
                          {hour}:00
                        </div>
                        
                        {currentWeek.map((date, idx) => {
                          const tasks = getTasksForDateAndHour(selectedProject.id, date, hour);
                          
                          return (
                            <div
                              key={idx}
                              onClick={() => openTaskModal(selectedProject.id, date, hour)}
                              style={{
                                padding: '8px',
                                borderRight: idx < 6 ? '1px solid #e5e7eb' : 'none',
                                minHeight: '60px',
                                cursor: 'pointer',
                                background: tasks.length > 0 ? `${selectedProject.color}10` : 'white'
                              }}
                            >
                              {tasks.map(task => (
                                <div
                                  key={task.id}
                                  onClick={(e) => e.stopPropagation()}
                                  style={{
                                    background: selectedProject.color,
                                    color: 'white',
                                    padding: '6px 8px',
                                    borderRadius: '6px',
                                    fontSize: '12px',
                                    marginBottom: '4px',
                                    cursor: 'default'
                                  }}
                                >
                                  <div style={{
                                    display: 'flex',
                                    justifyContent: 'space-between',
                                    alignItems: 'start',
                                    gap: '4px'
                                  }}>
                                    <div
                                      onClick={() => {
                                        const newStatus = task.status === 'completed' ? 'pending' : 'completed';
                                        updateTask(selectedProject.id, task.id, { status: newStatus });
                                      }}
                                      style={{
                                        flex: 1,
                                        textDecoration: task.status === 'completed' ? 'line-through' : 'none',
                                        opacity: task.status === 'completed' ? 0.7 : 1,
                                        cursor: 'pointer',
                                        wordBreak: 'break-word'
                                      }}
                                    >
                                      {task.description}
                                      {task.memo && <div style={{ fontSize: '10px', marginTop: '2px', opacity: 0.8 }}>ğŸ“</div>}
                                    </div>
                                    <div style={{ display: 'flex', gap: '2px' }}>
                                      <button
                                        onClick={() => openMemoModal(selectedProject.id, task)}
                                        style={{
                                          background: 'rgba(255,255,255,0.2)',
                                          border: 'none',
                                          borderRadius: '4px',
                                          cursor: 'pointer',
                                          padding: '2px',
                                          display: 'flex'
                                        }}
                                      >
                                        <Icon name="edit" size={10} />
                                      </button>
                                      <button
                                        onClick={() => deleteTask(selectedProject.id, task.id)}
                                        style={{
                                          background: 'rgba(255,255,255,0.2)',
                                          border: 'none',
                                          borderRadius: '4px',
                                          cursor: 'pointer',
                                          padding: '2px',
                                          display: 'flex'
                                        }}
                                      >
                                        <Icon name="trash" size={10} />
                                      </button>
                                    </div>
                                  </div>
                                  {task.createdBy && (
                                    <div style={{
                                      fontSize: '10px',
                                      opacity: 0.8,
                                      marginTop: '2px'
                                    }}>
                                      {task.createdBy}
                                    </div>
                                  )}
                                </div>
                              ))}
                            </div>
                          );
                        })}
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>

          {/* Modals */}
          {showProjectModal && (
            <div style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              background: 'rgba(0,0,0,0.5)',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              zIndex: 1000,
              animation: 'fadeIn 0.2s'
            }}
            onClick={() => setShowProjectModal(false)}
            >
              <div style={{
                background: 'white',
                borderRadius: '16px',
                padding: '32px',
                maxWidth: '480px',
                width: '90%',
                boxShadow: '0 20px 60px rgba(0,0,0,0.3)',
                animation: 'slideUp 0.3s'
              }}
              onClick={(e) => e.stopPropagation()}
              >
                <h2 style={{
                  fontSize: '24px',
                  fontWeight: '700',
                  marginBottom: '8px',
                  color: '#1a1a1a'
                }}>ìƒˆ í”„ë¡œì íŠ¸ ì¶”ê°€</h2>
                <p style={{
                  color: '#666',
                  marginBottom: '24px',
                  fontSize: '14px'
                }}>í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</p>

                <input
                  type="text"
                  value={newProjectName}
                  onChange={(e) => setNewProjectName(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && handleAddProject()}
                  placeholder="ì˜ˆ: ì›¹ì‚¬ì´íŠ¸ ë¦¬ë‰´ì–¼"
                  autoFocus
                  style={{
                    width: '100%',
                    padding: '14px 16px',
                    border: '2px solid #e0e0e0',
                    borderRadius: '12px',
                    fontSize: '16px',
                    marginBottom: '24px',
                    outline: 'none'
                  }}
                />

                <div style={{
                  display: 'flex',
                  gap: '12px',
                  justifyContent: 'flex-end'
                }}>
                  <button
                    onClick={() => setShowProjectModal(false)}
                    style={{
                      padding: '12px 24px',
                      background: '#f1f3f5',
                      border: 'none',
                      borderRadius: '10px',
                      fontSize: '15px',
                      fontWeight: '600',
                      cursor: 'pointer',
                      color: '#666'
                    }}
                  >
                    ì·¨ì†Œ
                  </button>
                  <button
                    onClick={handleAddProject}
                    disabled={!newProjectName.trim()}
                    style={{
                      padding: '12px 24px',
                      background: newProjectName.trim() ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#e0e0e0',
                      border: 'none',
                      borderRadius: '10px',
                      fontSize: '15px',
                      fontWeight: '600',
                      cursor: newProjectName.trim() ? 'pointer' : 'not-allowed',
                      color: 'white',
                      boxShadow: newProjectName.trim() ? '0 4px 12px rgba(102, 126, 234, 0.3)' : 'none'
                    }}
                  >
                    ì¶”ê°€í•˜ê¸°
                  </button>
                </div>
              </div>
            </div>
          )}

          {showTaskModal && taskModalData && (
            <div style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              background: 'rgba(0,0,0,0.5)',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              zIndex: 1000,
              animation: 'fadeIn 0.2s'
            }}
            onClick={() => setShowTaskModal(false)}
            >
              <div style={{
                background: 'white',
                borderRadius: '16px',
                padding: '32px',
                maxWidth: '480px',
                width: '90%',
                boxShadow: '0 20px 60px rgba(0,0,0,0.3)',
                animation: 'slideUp 0.3s'
              }}
              onClick={(e) => e.stopPropagation()}
              >
                <h2 style={{
                  fontSize: '24px',
                  fontWeight: '700',
                  marginBottom: '8px',
                  color: '#1a1a1a'
                }}>ìƒˆ ì—…ë¬´ ì¶”ê°€</h2>
                <p style={{
                  color: '#666',
                  marginBottom: '24px',
                  fontSize: '14px'
                }}>
                  {taskModalData.date.toLocaleDateString('ko-KR', { month: 'long', day: 'numeric' })} {taskModalData.hour}:00
                </p>

                <textarea
                  value={newTaskDescription}
                  onChange={(e) => setNewTaskDescription(e.target.value)}
                  placeholder="ì—…ë¬´ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
                  autoFocus
                  style={{
                    width: '100%',
                    padding: '14px 16px',
                    border: '2px solid #e0e0e0',
                    borderRadius: '12px',
                    fontSize: '16px',
                    marginBottom: '24px',
                    outline: 'none',
                    minHeight: '120px',
                    resize: 'vertical',
                    fontFamily: 'inherit'
                  }}
                />

                <div style={{
                  display: 'flex',
                  gap: '12px',
                  justifyContent: 'flex-end'
                }}>
                  <button
                    onClick={() => setShowTaskModal(false)}
                    style={{
                      padding: '12px 24px',
                      background: '#f1f3f5',
                      border: 'none',
                      borderRadius: '10px',
                      fontSize: '15px',
                      fontWeight: '600',
                      cursor: 'pointer',
                      color: '#666'
                    }}
                  >
                    ì·¨ì†Œ
                  </button>
                  <button
                    onClick={handleAddTask}
                    disabled={!newTaskDescription.trim()}
                    style={{
                      padding: '12px 24px',
                      background: newTaskDescription.trim() ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : '#e0e0e0',
                      border: 'none',
                      borderRadius: '10px',
                      fontSize: '15px',
                      fontWeight: '600',
                      cursor: newTaskDescription.trim() ? 'pointer' : 'not-allowed',
                      color: 'white',
                      boxShadow: newTaskDescription.trim() ? '0 4px 12px rgba(102, 126, 234, 0.3)' : 'none'
                    }}
                  >
                    ì¶”ê°€í•˜ê¸°
                  </button>
                </div>
              </div>
            </div>
          )}

          {showMemoModal && selectedTask && (
            <div style={{
              position: 'fixed',
              top: 0,
              left: 0,
              right: 0,
              bottom: 0,
              background: 'rgba(0,0,0,0.5)',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              zIndex: 1000,
              animation: 'fadeIn 0.2s'
            }}
            onClick={() => setShowMemoModal(false)}
            >
              <div style={{
                background: 'white',
                borderRadius: '16px',
                padding: '32px',
                maxWidth: '480px',
                width: '90%',
                boxShadow: '0 20px 60px rgba(0,0,0,0.3)',
                animation: 'slideUp 0.3s'
              }}
              onClick={(e) => e.stopPropagation()}
              >
                <h2 style={{
                  fontSize: '24px',
                  fontWeight: '700',
                  marginBottom: '8px',
                  color: '#1a1a1a'
                }}>ì—…ë¬´ ë©”ëª¨</h2>
                <p style={{
                  color: '#666',
                  marginBottom: '8px',
                  fontSize: '14px'
                }}>
                  {selectedTask.task.description}
                </p>
                <p style={{
                  color: '#999',
                  marginBottom: '24px',
                  fontSize: '12px'
                }}>
                  ì¶”ê°€ ë©”ëª¨ë‚˜ ì°¸ê³ ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”
                </p>

                <textarea
                  value={taskMemo}
                  onChange={(e) => setTaskMemo(e.target.value)}
                  placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                  autoFocus
                  style={{
                    width: '100%',
                    padding: '14px 16px',
                    border: '2px solid #e0e0e0',
                    borderRadius: '12px',
                    fontSize: '16px',
                    marginBottom: '24px',
                    outline: 'none',
                    minHeight: '150px',
                    resize: 'vertical',
                    fontFamily: 'inherit'
                  }}
                />

                <div style={{
                  display: 'flex',
                  gap: '12px',
                  justifyContent: 'flex-end'
                }}>
                  <button
                    onClick={() => setShowMemoModal(false)}
                    style={{
                      padding: '12px 24px',
                      background: '#f1f3f5',
                      border: 'none',
                      borderRadius: '10px',
                      fontSize: '15px',
                      fontWeight: '600',
                      cursor: 'pointer',
                      color: '#666'
                    }}
                  >
                    ì·¨ì†Œ
                  </button>
                  <button
                    onClick={handleSaveMemo}
                    style={{
                      padding: '12px 24px',
                      background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                      border: 'none',
                      borderRadius: '10px',
                      fontSize: '15px',
                      fontWeight: '600',
                      cursor: 'pointer',
                      color: 'white',
                      boxShadow: '0 4px 12px rgba(102, 126, 234, 0.3)'
                    }}
                  >
                    ì €ì¥
                  </button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    };

    ReactDOM.render(<DailyPlanner />, document.getElementById('root'));
  </script>
</body>
</html>
