<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë°ì¼ë¦¬ ì—…ë¬´ê³„íší‘œ (íŒ€ ê³µìœ )</title>
    <!-- PWA ì„¤ì • -->
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#667eea" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="ì—…ë¬´ê³„íš" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <!-- React -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Noto Sans KR", sans-serif;
        background: #f5f7fa;
      }
      #root {
        width: 100%;
        height: 100vh;
      }
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
      }
      ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #555;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      /* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
      @media (max-width: 768px) {
        body {
          overflow-x: hidden;
        }

        /* í—¤ë” ì¡°ì • */
        div[style*="padding: 16px 32px"] {
          padding: 12px 16px !important;
          flex-wrap: wrap;
        }

        /* ë©”ì¸ ë ˆì´ì•„ì›ƒ */
        div[style*="display: flex"][style*="height: calc(100vh - 73px)"] {
          flex-direction: column !important;
          height: auto !important;
        }

        /* ì‚¬ì´ë“œë°” ìˆ¨ê¸°ê¸° */
        div[style*="width: 320px"][style*="borderRight"] {
          display: none !important;
        }

        /* í”„ë¡œì íŠ¸ ëª©ë¡ì„ ìƒë‹¨ì— í‘œì‹œ */
        div[style*="flex: 1"][style*="padding: 24px"] {
          padding: 16px !important;
        }
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // â­â­â­ ì—¬ê¸°ì— Firebase ì„¤ì •ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš” â­â­â­
      const firebaseConfig = {
        apiKey: "AIzaSyBa7iRzgtdo71I1BlMOYJqdl-5yk1SE5PE",
        authDomain: "daily-planner-dc99a.firebaseapp.com",
        databaseURL:
          "https://daily-planner-dc99a-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "daily-planner-dc99a",
        storageBucket: "daily-planner-dc99a.firebasestorage.app",
        messagingSenderId: "383162342312",
        appId: "1:383162342312:web:12184f16b2dc5488b29b9d",
        measurementId: "G-35HH1DPHX5",
      };

      // Firebase ì´ˆê¸°í™”
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      const database = firebase.database();

      // Icons
      const Icon = ({ name, size = 24, color = "currentColor", ...props }) => {
        const icons = {
          plus: (
            <path
              d="M12 5v14m-7-7h14"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          trash: (
            <path
              d="M3 6h18m-2 0v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          briefcase: (
            <path
              d="M20 7H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2ZM16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          calendar: (
            <path
              d="M8 2v4m8-4v4M3 10h18M5 4h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          user: (
            <path
              d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2m8-10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          users: (
            <path
              d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2m22 0v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75M13 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          chevronRight: (
            <path
              d="m9 18 6-6-6-6"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          chevronLeft: (
            <path
              d="m15 18-6-6 6-6"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          refresh: (
            <path
              d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          edit: (
            <path
              d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
          x: (
            <path
              d="M18 6 6 18M6 6l12 12"
              stroke={color}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
              fill="none"
            />
          ),
        };
        return (
          <svg width={size} height={size} viewBox="0 0 24 24" {...props}>
            {icons[name]}
          </svg>
        );
      };

      const DailyPlanner = () => {
        const [projects, setProjects] = useState([]);
        const [selectedProject, setSelectedProject] = useState(null);
        const [currentWeek, setCurrentWeek] = useState(getWeekDates());
        const [currentMonth, setCurrentMonth] = useState(new Date());
        const [selectedDate, setSelectedDate] = useState(null);
        const [loading, setLoading] = useState(true);
        const [userName, setUserName] = useState("");
        const [showLoginModal, setShowLoginModal] = useState(false);
        const [showProjectModal, setShowProjectModal] = useState(false);
        const [showEditProjectModal, setShowEditProjectModal] = useState(false);
        const [editingProject, setEditingProject] = useState(null);
        const [showTaskModal, setShowTaskModal] = useState(false);
        const [showMemoModal, setShowMemoModal] = useState(false);
        const [newProjectName, setNewProjectName] = useState("");
        const [newProjectOrganization, setNewProjectOrganization] =
          useState("");
        const [newProjectAssignee, setNewProjectAssignee] = useState("");
        const [newProjectStartDate, setNewProjectStartDate] = useState("");
        const [newProjectEndDate, setNewProjectEndDate] = useState("");
        const [newTaskDescription, setNewTaskDescription] = useState("");
        const [taskModalData, setTaskModalData] = useState(null);
        const [taskStartHour, setTaskStartHour] = useState(9);
        const [taskEndHour, setTaskEndHour] = useState(10);
        const [selectedTask, setSelectedTask] = useState(null);
        const [taskMemo, setTaskMemo] = useState("");
        const [lastSync, setLastSync] = useState(new Date());
        const [isMobile, setIsMobile] = useState(window.innerWidth <= 768);
        const [showMobileProjectList, setShowMobileProjectList] =
          useState(false);

        useEffect(() => {
          const handleResize = () => {
            setIsMobile(window.innerWidth <= 768);
          };
          window.addEventListener("resize", handleResize);
          return () => window.removeEventListener("resize", handleResize);
        }, []);

        const workHours = Array.from({ length: 10 }, (_, i) => i + 9);

        useEffect(() => {
          // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚¬ìš©ì ì´ë¦„ ë³µêµ¬
          const savedUserName = localStorage.getItem("daily-planner-username");
          if (savedUserName) {
            setUserName(savedUserName);
            setShowLoginModal(false);
          } else {
            setShowLoginModal(true);
          }

          // Firebase ì‹¤ì‹œê°„ ë°ì´í„° ë¦¬ìŠ¤ë„ˆ
          const projectsRef = database.ref("projects");

          projectsRef.on("value", (snapshot) => {
            const data = snapshot.val();
            if (data) {
              const projectsArray = Object.keys(data).map((key) => ({
                id: key,
                ...data[key],
              }));
              setProjects(projectsArray);
              setLastSync(new Date());
            } else {
              setProjects([]);
            }
            setLoading(false);
          });

          // ìë™ ì •ë¦¬
          const cleanupInterval = setInterval(() => {
            cleanOldTasks();
          }, 60000);

          return () => {
            projectsRef.off();
            clearInterval(cleanupInterval);
          };
        }, []);

        function cleanOldTasks() {
          const fiveDaysAgo = new Date();
          fiveDaysAgo.setDate(fiveDaysAgo.getDate() - 5);
          fiveDaysAgo.setHours(0, 0, 0, 0);

          projects.forEach((project) => {
            const updatedTasks = project.tasks.filter((task) => {
              const taskDate = new Date(task.date);
              taskDate.setHours(0, 0, 0, 0);
              return taskDate >= fiveDaysAgo;
            });

            if (updatedTasks.length !== project.tasks.length) {
              database.ref(`projects/${project.id}/tasks`).set(updatedTasks);
            }
          });
        }

        function getWeekDates(baseDate = new Date()) {
          const dates = [];
          const dayOfWeek = baseDate.getDay();
          const monday = new Date(baseDate);
          monday.setDate(
            baseDate.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1)
          );

          for (let i = 0; i < 7; i++) {
            const date = new Date(monday);
            date.setDate(monday.getDate() + i);
            dates.push(date);
          }
          return dates;
        }

        function getMonthDates(date) {
          const year = date.getFullYear();
          const month = date.getMonth();
          const firstDay = new Date(year, month, 1);
          const lastDay = new Date(year, month + 1, 0);

          const dates = [];
          const startDay = firstDay.getDay();

          // ì´ì „ ë‹¬ ë‚ ì§œ
          for (let i = startDay - 1; i >= 0; i--) {
            const d = new Date(year, month, -i);
            dates.push({ date: d, isCurrentMonth: false });
          }

          // í˜„ì¬ ë‹¬ ë‚ ì§œ
          for (let i = 1; i <= lastDay.getDate(); i++) {
            dates.push({
              date: new Date(year, month, i),
              isCurrentMonth: true,
            });
          }

          // ë‹¤ìŒ ë‹¬ ë‚ ì§œ (6ì£¼ ì±„ìš°ê¸°)
          const remaining = 42 - dates.length;
          for (let i = 1; i <= remaining; i++) {
            dates.push({
              date: new Date(year, month + 1, i),
              isCurrentMonth: false,
            });
          }

          return dates;
        }

        function goToPreviousWeek() {
          const firstDay = currentWeek[0];
          const previousWeek = new Date(firstDay);
          previousWeek.setDate(firstDay.getDate() - 7);
          setCurrentWeek(getWeekDates(previousWeek));
        }

        function goToNextWeek() {
          const firstDay = currentWeek[0];
          const nextWeek = new Date(firstDay);
          nextWeek.setDate(firstDay.getDate() + 7);
          setCurrentWeek(getWeekDates(nextWeek));
        }

        function goToCurrentWeek() {
          setCurrentWeek(getWeekDates());
        }

        function goToPreviousMonth() {
          setCurrentMonth(
            new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1)
          );
        }

        function goToNextMonth() {
          setCurrentMonth(
            new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1)
          );
        }

        function goToCurrentMonth() {
          setCurrentMonth(new Date());
        }

        function addProject() {
          setNewProjectName("");
          setNewProjectOrganization("");
          setNewProjectAssignee("");
          setNewProjectStartDate("");
          setNewProjectEndDate("");
          setShowProjectModal(true);
        }

        async function handleAddProject() {
          if (!newProjectName.trim()) {
            alert("í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
          }

          const newProject = {
            name: newProjectName.trim(),
            organization: newProjectOrganization.trim(),
            assignee: newProjectAssignee.trim(),
            startDate: newProjectStartDate,
            endDate: newProjectEndDate,
            color: getRandomColor(),
            tasks: [],
            createdAt: Date.now(),
            createdBy: userName,
          };

          try {
            const newProjectRef = database.ref("projects").push();
            await newProjectRef.set(newProject);
            setShowProjectModal(false);
            setNewProjectName("");
            setNewProjectOrganization("");
            setNewProjectAssignee("");
            setNewProjectStartDate("");
            setNewProjectEndDate("");
          } catch (error) {
            alert("í”„ë¡œì íŠ¸ ì¶”ê°€ ì‹¤íŒ¨: " + error.message);
          }
        }
        async function handleEditProject() {
          if (!newProjectName.trim()) {
            alert("í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
          }

          try {
            await database.ref(`projects/${editingProject.id}`).update({
              name: newProjectName.trim(),
              organization: newProjectOrganization.trim(),
              assignee: newProjectAssignee.trim(),
              startDate: newProjectStartDate,
              endDate: newProjectEndDate,
            });
            setShowEditProjectModal(false);
            setEditingProject(null);
            setNewProjectName("");
            setNewProjectOrganization("");
            setNewProjectAssignee("");
            setNewProjectStartDate("");
            setNewProjectEndDate("");
          } catch (error) {
            alert("í”„ë¡œì íŠ¸ ìˆ˜ì • ì‹¤íŒ¨: " + error.message);
          }
        }
        async function deleteProject(projectId) {
          if (!confirm("ì´ í”„ë¡œì íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

          try {
            await database.ref(`projects/${projectId}`).remove();
            if (selectedProject?.id === projectId) {
              setSelectedProject(null);
            }
          } catch (error) {
            alert("ì‚­ì œ ì‹¤íŒ¨: " + error.message);
          }
        }

        async function updateProjectAssignee(projectId, assignee) {
          try {
            await database.ref(`projects/${projectId}/assignee`).set(assignee);
          } catch (error) {
            console.error("ë‹´ë‹¹ì ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:", error);
          }
        }

        function openTaskModal(projectId, date, hour) {
          setTaskModalData({ projectId, date, hour });
          setNewTaskDescription("");
          setTaskStartHour(hour || 9);
          setTaskEndHour((hour || 9) + 1);
          setShowTaskModal(true);
        }

        async function handleAddTask() {
          if (!newTaskDescription.trim() || !taskModalData) return;

          const { projectId, date, hour } = taskModalData;

          const task = {
            id: Date.now(),
            date: date.toISOString().split("T")[0],
            startHour: taskStartHour,
            endHour: taskEndHour,
            hour: taskStartHour, // ê¸°ì¡´ í˜¸í™˜ì„± ìœ ì§€
            description: newTaskDescription.trim(),
            status: "pending",
            memo: "",
            createdBy: userName,
            createdAt: Date.now(),
          };

          try {
            const project = projects.find((p) => p.id === projectId);
            const updatedTasks = [...(project.tasks || []), task];
            await database.ref(`projects/${projectId}/tasks`).set(updatedTasks);

            setShowTaskModal(false);
            setNewTaskDescription("");
            setTaskModalData(null);
          } catch (error) {
            alert("ì—…ë¬´ ì¶”ê°€ ì‹¤íŒ¨: " + error.message);
          }
        }

        async function updateTask(projectId, taskId, updates) {
          try {
            const project = projects.find((p) => p.id === projectId);
            const updatedTasks = project.tasks.map((t) =>
              t.id === taskId ? { ...t, ...updates } : t
            );
            await database.ref(`projects/${projectId}/tasks`).set(updatedTasks);
          } catch (error) {
            console.error("ì—…ë¬´ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:", error);
          }
        }

        async function deleteTask(projectId, taskId) {
          try {
            const project = projects.find((p) => p.id === projectId);
            const updatedTasks = project.tasks.filter((t) => t.id !== taskId);
            await database.ref(`projects/${projectId}/tasks`).set(updatedTasks);
          } catch (error) {
            alert("ì—…ë¬´ ì‚­ì œ ì‹¤íŒ¨: " + error.message);
          }
        }

        function openMemoModal(projectId, task) {
          setSelectedTask({ projectId, task });
          setTaskMemo(task.memo || "");
          setShowMemoModal(true);
        }

        async function handleSaveMemo() {
          if (!selectedTask) return;

          try {
            await updateTask(selectedTask.projectId, selectedTask.task.id, {
              memo: taskMemo,
            });
            setShowMemoModal(false);
            setSelectedTask(null);
            setTaskMemo("");
          } catch (error) {
            alert("ë©”ëª¨ ì €ì¥ ì‹¤íŒ¨: " + error.message);
          }
        }

        function getRandomColor() {
          const colors = [
            "#FF6B6B",
            "#4ECDC4",
            "#45B7D1",
            "#FFA07A",
            "#98D8C8",
            "#F7DC6F",
            "#BB8FCE",
            "#85C1E2",
            "#F8B739",
            "#52B788",
          ];
          return colors[Math.floor(Math.random() * colors.length)];
        }

        function getTasksForDateAndHour(projectId, date, hour) {
          const project = projects.find((p) => p.id === projectId);
          if (!project || !project.tasks) return [];

          const dateStr = date.toISOString().split("T")[0];
          return project.tasks.filter(
            (t) => t.date === dateStr && t.hour === hour
          );
        }

        function getTasksForDate(date) {
          const dateStr = date.toISOString().split("T")[0];
          return projects.flatMap((project) => {
            const projectTasks = (project.tasks || []).filter(
              (t) => t.date === dateStr
            );
            return projectTasks.map((task) => ({ ...task, project }));
          });
        }
        function formatDateRange(startDate, endDate) {
          if (!startDate || !endDate) return "";
          const start = new Date(startDate);
          const end = new Date(endDate);
          return `${start.getMonth() + 1}/${start.getDate()} ~ ${
            end.getMonth() + 1
          }/${end.getDate()}`;
        }

        function isDateInProjectRange(date, project) {
          if (!project.startDate || !project.endDate) return false;

          const checkDate = new Date(date);
          checkDate.setHours(0, 0, 0, 0);

          const start = new Date(project.startDate);
          start.setHours(0, 0, 0, 0);

          const end = new Date(project.endDate);
          end.setHours(0, 0, 0, 0);

          return checkDate >= start && checkDate <= end;
        }
        function getProjectProgress(project) {
          if (!project.tasks || !project.tasks.length) return 0;
          const completed = project.tasks.filter(
            (t) => t.status === "completed"
          ).length;
          return Math.round((completed / project.tasks.length) * 100);
        }

        function handleLogin() {
          if (!userName.trim()) {
            alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
          }
          // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
          localStorage.setItem("daily-planner-username", userName.trim());
          setShowLoginModal(false);
        }

        function handleLogout() {
          localStorage.removeItem("daily-planner-username");
          setUserName("");
          setShowLoginModal(true);
        }

        function formatLastSync() {
          const now = new Date();
          const diff = Math.floor((now - lastSync) / 1000);
          if (diff < 60) return "ë°©ê¸ˆ ì „";
          if (diff < 3600) return `${Math.floor(diff / 60)}ë¶„ ì „`;
          return lastSync.toLocaleTimeString("ko-KR", {
            hour: "2-digit",
            minute: "2-digit",
          });
        }

        if (showLoginModal) {
          return (
            <div
              style={{
                minHeight: "100vh",
                background: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                padding: "20px",
              }}
            >
              <div
                style={{
                  background: "white",
                  borderRadius: "24px",
                  padding: "48px",
                  maxWidth: "440px",
                  width: "100%",
                  boxShadow: "0 20px 60px rgba(0,0,0,0.3)",
                }}
              >
                <div
                  style={{
                    width: "64px",
                    height: "64px",
                    background:
                      "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                    borderRadius: "16px",
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    marginBottom: "24px",
                  }}
                >
                  <Icon name="calendar" size={32} color="white" />
                </div>

                <h1
                  style={{
                    fontSize: "28px",
                    fontWeight: "700",
                    marginBottom: "8px",
                    color: "#1a1a1a",
                  }}
                >
                  ë°ì¼ë¦¬ ì—…ë¬´ê³„íší‘œ
                </h1>

                <p
                  style={{
                    color: "#666",
                    marginBottom: "32px",
                    lineHeight: "1.6",
                  }}
                >
                  íŒ€ í”„ë¡œì íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê´€ë¦¬í•˜ì„¸ìš”.
                  <br />
                  <strong style={{ color: "#667eea" }}>
                    ğŸ”„ ì‹¤ì‹œê°„ ë™ê¸°í™” ì§€ì›
                  </strong>
                </p>

                <div style={{ marginBottom: "24px" }}>
                  <label
                    style={{
                      display: "block",
                      marginBottom: "8px",
                      fontWeight: "600",
                      color: "#333",
                    }}
                  >
                    ì‚¬ìš©ì ì´ë¦„
                  </label>
                  <input
                    type="text"
                    value={userName}
                    onChange={(e) => setUserName(e.target.value)}
                    onKeyPress={(e) => e.key === "Enter" && handleLogin()}
                    placeholder="í™ê¸¸ë™"
                    autoFocus
                    style={{
                      width: "100%",
                      padding: "14px 16px",
                      border: "2px solid #e0e0e0",
                      borderRadius: "12px",
                      fontSize: "16px",
                      outline: "none",
                    }}
                  />
                </div>

                <button
                  onClick={handleLogin}
                  style={{
                    width: "100%",
                    padding: "16px",
                    background:
                      "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                    color: "white",
                    border: "none",
                    borderRadius: "12px",
                    fontSize: "16px",
                    fontWeight: "600",
                    cursor: "pointer",
                    boxShadow: "0 4px 12px rgba(102, 126, 234, 0.4)",
                  }}
                >
                  ì‹œì‘í•˜ê¸°
                </button>

                <div
                  style={{
                    marginTop: "24px",
                    padding: "16px",
                    background: "#f0f7ff",
                    borderRadius: "12px",
                    fontSize: "13px",
                    color: "#1e40af",
                    border: "1px solid #bfdbfe",
                  }}
                >
                  <Icon
                    name="users"
                    size={16}
                    style={{ marginRight: "8px", verticalAlign: "middle" }}
                  />
                  Firebase ì‹¤ì‹œê°„ ê³µìœ  ë²„ì „ì…ë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨í•´ë„ ë¡œê·¸ì¸ ìƒíƒœê°€
                  ìœ ì§€ë©ë‹ˆë‹¤.
                </div>
              </div>
            </div>
          );
        }

        if (loading) {
          return (
            <div
              style={{
                minHeight: "100vh",
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                background: "#f5f7fa",
              }}
            >
              <div style={{ textAlign: "center" }}>
                <div
                  style={{
                    width: "48px",
                    height: "48px",
                    border: "4px solid #e0e0e0",
                    borderTop: "4px solid #667eea",
                    borderRadius: "50%",
                    animation: "spin 1s linear infinite",
                    margin: "0 auto 16px",
                  }}
                />
                <p style={{ color: "#666" }}>ë°ì´í„° ë¡œë”© ì¤‘...</p>
              </div>
            </div>
          );
        }

        return (
          <div style={{ minHeight: "100vh", background: "#f5f7fa" }}>
            {/* Header */}
            <div
              style={{
                background: "white",
                borderBottom: "1px solid #e5e7eb",
                padding: "16px 32px",
                display: "flex",
                alignItems: "center",
                justifyContent: "space-between",
                boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
              }}
            >
              <div
                style={{ display: "flex", alignItems: "center", gap: "12px" }}
              >
                <div
                  onClick={() => setSelectedProject(null)}
                  style={{
                    width: "40px",
                    height: "40px",
                    background:
                      "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                    borderRadius: "10px",
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    cursor: "pointer",
                  }}
                >
                  <Icon name="calendar" size={22} color="white" />
                </div>
                <div>
                  <h1
                    style={{
                      fontSize: "20px",
                      fontWeight: "700",
                      color: "#1a1a1a",
                      margin: 0,
                    }}
                  >
                    ë°ì¼ë¦¬ ì—…ë¬´ê³„íší‘œ
                  </h1>
                  <p
                    style={{
                      fontSize: "13px",
                      color: "#666",
                      margin: 0,
                    }}
                  >
                    <Icon
                      name="refresh"
                      size={12}
                      style={{ marginRight: "4px", verticalAlign: "middle" }}
                    />
                    ë§ˆì§€ë§‰ ë™ê¸°í™”: {formatLastSync()}
                  </p>
                </div>
              </div>

              <div
                style={{
                  display: "flex",
                  alignItems: "center",
                  gap: "16px",
                }}
              >
                <div
                  style={{
                    display: "flex",
                    alignItems: "center",
                    gap: "8px",
                    padding: "8px 16px",
                    background: "#f8f9fa",
                    borderRadius: "8px",
                  }}
                >
                  <Icon name="user" size={16} color="#667eea" />
                  <span style={{ fontSize: "14px", fontWeight: "500" }}>
                    {userName}
                  </span>
                </div>

                <button
                  onClick={handleLogout}
                  style={{
                    padding: "8px 16px",
                    background: "white",
                    border: "1px solid #e0e0e0",
                    borderRadius: "8px",
                    fontSize: "14px",
                    cursor: "pointer",
                    color: "#666",
                  }}
                >
                  ë¡œê·¸ì•„ì›ƒ
                </button>
              </div>
            </div>

            <div style={{ display: "flex", height: "calc(100vh - 73px)" }}>
              {!isMobile && (
                <>
                  {/* Left Sidebar */}
                  <div
                    style={{
                      width: "320px",
                      background: "white",
                      borderRight: "1px solid #e5e7eb",
                      padding: "24px",
                      overflowY: "auto",
                    }}
                  >
                    <div
                      style={{
                        display: "flex",
                        justifyContent: "space-between",
                        alignItems: "center",
                        marginBottom: "20px",
                      }}
                    >
                      <h2
                        style={{
                          fontSize: "18px",
                          fontWeight: "700",
                          color: "#1a1a1a",
                          margin: 0,
                        }}
                      >
                        í”„ë¡œì íŠ¸ ëª©ë¡
                      </h2>

                      <button
                        onClick={addProject}
                        style={{
                          width: "36px",
                          height: "36px",
                          background:
                            "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                          border: "none",
                          borderRadius: "8px",
                          cursor: "pointer",
                          display: "flex",
                          alignItems: "center",
                          justifyContent: "center",
                          boxShadow: "0 2px 8px rgba(102, 126, 234, 0.3)",
                        }}
                      >
                        <Icon name="plus" size={20} color="white" />
                      </button>
                    </div>

                    {projects.length === 0 ? (
                      <div
                        style={{
                          padding: "40px 20px",
                          textAlign: "center",
                          color: "#999",
                        }}
                      >
                        <Icon
                          name="calendar"
                          size={48}
                          color="#ddd"
                          style={{ marginBottom: "12px" }}
                        />
                        <p>í”„ë¡œì íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</p>
                      </div>
                    ) : (
                      <div
                        style={{
                          display: "flex",
                          flexDirection: "column",
                          gap: "12px",
                        }}
                      >
                        {projects.map((project) => {
                          const progress = getProjectProgress(project);
                          const isSelected = selectedProject?.id === project.id;

                          return (
                            <div
                              key={project.id}
                              onClick={() => setSelectedProject(project)}
                              style={{
                                padding: "16px",
                                background: isSelected ? "#f8f9ff" : "white",
                                border: `2px solid ${
                                  isSelected ? project.color : "#e5e7eb"
                                }`,
                                borderRadius: "12px",
                                cursor: "pointer",
                                transition: "all 0.2s",
                              }}
                            >
                              <div
                                style={{
                                  display: "flex",
                                  justifyContent: "space-between",
                                  alignItems: "start",
                                  marginBottom: "12px",
                                }}
                              >
                                <div style={{ flex: 1 }}>
                                  <div
                                    style={{
                                      display: "flex",
                                      alignItems: "center",
                                      gap: "8px",
                                      marginBottom: "8px",
                                    }}
                                  >
                                    <div
                                      style={{
                                        width: "8px",
                                        height: "8px",
                                        background: project.color,
                                        borderRadius: "50%",
                                      }}
                                    />
                                    <h3
                                      style={{
                                        fontSize: "15px",
                                        fontWeight: "600",
                                        color: "#1a1a1a",
                                        margin: 0,
                                      }}
                                    >
                                      {project.name}
                                    </h3>
                                  </div>

                                  {project.organization && (
                                    <div
                                      style={{
                                        display: "flex",
                                        alignItems: "center",
                                        gap: "6px",
                                        marginBottom: "6px",
                                      }}
                                    >
                                      <Icon
                                        name="briefcase"
                                        size={12}
                                        color="#666"
                                      />
                                      <span
                                        style={{
                                          fontSize: "12px",
                                          color: "#666",
                                        }}
                                      >
                                        {project.organization}
                                      </span>
                                    </div>
                                  )}

                                  {project.assignee && (
                                    <div
                                      style={{
                                        display: "flex",
                                        alignItems: "center",
                                        gap: "6px",
                                        marginBottom: "6px",
                                      }}
                                    >
                                      <Icon
                                        name="user"
                                        size={12}
                                        color="#666"
                                      />
                                      <span
                                        style={{
                                          fontSize: "12px",
                                          color: "#666",
                                        }}
                                      >
                                        {project.assignee}
                                      </span>
                                    </div>
                                  )}

                                  {project.startDate && project.endDate && (
                                    <div
                                      style={{
                                        display: "flex",
                                        alignItems: "center",
                                        gap: "6px",
                                      }}
                                    >
                                      <Icon
                                        name="calendar"
                                        size={12}
                                        color="#666"
                                      />
                                      <span
                                        style={{
                                          fontSize: "11px",
                                          color: "#666",
                                        }}
                                      >
                                        {formatDateRange(
                                          project.startDate,
                                          project.endDate
                                        )}
                                      </span>
                                    </div>
                                  )}
                                </div>
                                <button
                                  onClick={(e) => {
                                    e.stopPropagation();
                                    setEditingProject(project);
                                    setNewProjectName(project.name);
                                    setNewProjectOrganization(
                                      project.organization || ""
                                    );
                                    setNewProjectAssignee(
                                      project.assignee || ""
                                    );
                                    setNewProjectStartDate(
                                      project.startDate || ""
                                    );
                                    setNewProjectEndDate(project.endDate || "");
                                    setShowEditProjectModal(true);
                                  }}
                                  style={{
                                    background: "none",
                                    border: "none",
                                    cursor: "pointer",
                                    padding: "4px",
                                    opacity: 0.5,
                                  }}
                                >
                                  <Icon name="edit" size={16} color="#667eea" />
                                </button>
                                <button
                                  onClick={(e) => {
                                    e.stopPropagation();
                                    deleteProject(project.id);
                                  }}
                                  style={{
                                    background: "none",
                                    border: "none",
                                    cursor: "pointer",
                                    padding: "4px",
                                    opacity: 0.5,
                                  }}
                                >
                                  <Icon
                                    name="trash"
                                    size={16}
                                    color="#ff4444"
                                  />
                                </button>
                              </div>
                              <div style={{ marginTop: "12px" }}>
                                <div
                                  style={{
                                    display: "flex",
                                    justifyContent: "space-between",
                                    fontSize: "12px",
                                    color: "#666",
                                    marginBottom: "6px",
                                  }}
                                >
                                  <span>ì§„í–‰ë¥ </span>
                                  <span style={{ fontWeight: "600" }}>
                                    {progress}%
                                  </span>
                                </div>
                                <div
                                  style={{
                                    height: "6px",
                                    background: "#e5e7eb",
                                    borderRadius: "3px",
                                    overflow: "hidden",
                                  }}
                                >
                                  <div
                                    style={{
                                      width: `${progress}%`,
                                      height: "100%",
                                      background: project.color,
                                      transition: "width 0.3s",
                                    }}
                                  />
                                </div>
                              </div>

                              <div
                                style={{
                                  marginTop: "8px",
                                  fontSize: "12px",
                                  color: "#999",
                                }}
                              >
                                {project.tasks?.length || 0}ê°œ ì—…ë¬´
                              </div>
                            </div>
                          );
                        })}
                      </div>
                    )}
                  </div>
                </>
              )}

              {/* Right Panel */}
              <div
                style={{
                  flex: 1,
                  padding: "24px",
                  overflowY: "auto",
                }}
              >
                {!selectedProject && !selectedDate ? (
                  // ì›”ê°„ ìº˜ë¦°ë” ë·°
                  <div>
                    <div
                      style={{
                        background: "white",
                        padding: "20px 24px",
                        borderRadius: "12px",
                        marginBottom: "24px",
                        boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
                      }}
                    >
                      <h2
                        style={{
                          fontSize: "24px",
                          fontWeight: "700",
                          color: "#1a1a1a",
                          margin: 0,
                        }}
                      >
                        ì „ì²´ í”„ë¡œì íŠ¸ í˜„í™©
                      </h2>
                      <p
                        style={{
                          fontSize: "14px",
                          color: "#666",
                          marginTop: "8px",
                        }}
                      >
                        ì›”ê°„ ìº˜ë¦°ë”ì—ì„œ ë‚ ì§œë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ì¼ì˜ ìƒì„¸ ì¼ì •ì„
                        í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                      </p>

                      {/* ëª¨ë°”ì¼ í”„ë¡œì íŠ¸ ì„ íƒ ë²„íŠ¼ */}
                      {isMobile && (
                        <button
                          onClick={() =>
                            setShowMobileProjectList(!showMobileProjectList)
                          }
                          style={{
                            marginTop: "16px",
                            width: "100%",
                            padding: "12px 16px",
                            background:
                              "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                            color: "white",
                            border: "none",
                            borderRadius: "10px",
                            fontSize: "15px",
                            fontWeight: "600",
                            cursor: "pointer",
                            display: "flex",
                            alignItems: "center",
                            justifyContent: "center",
                            gap: "8px",
                            boxShadow: "0 2px 8px rgba(102, 126, 234, 0.3)",
                          }}
                        >
                          <Icon name="chevronRight" size={18} />
                          í”„ë¡œì íŠ¸ ì„ íƒ
                        </button>
                      )}
                    </div>

                    {/* Month Navigation */}
                    <div
                      style={{
                        background: "white",
                        padding: "16px 24px",
                        borderRadius: "12px",
                        marginBottom: "16px",
                        boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
                        display: "flex",
                        alignItems: "center",
                        justifyContent: "space-between",
                      }}
                    >
                      <button
                        onClick={goToPreviousMonth}
                        style={{
                          padding: "10px 20px",
                          background: "#f8f9fa",
                          border: "1px solid #e5e7eb",
                          borderRadius: "10px",
                          fontSize: "14px",
                          fontWeight: "600",
                          cursor: "pointer",
                          color: "#495057",
                          display: "flex",
                          alignItems: "center",
                          gap: "8px",
                        }}
                      >
                        <Icon name="chevronLeft" size={18} />
                        ì´ì „ ë‹¬
                      </button>

                      <div
                        style={{
                          display: "flex",
                          alignItems: "center",
                          gap: "16px",
                        }}
                      >
                        <div
                          style={{
                            fontSize: "18px",
                            fontWeight: "700",
                            color: "#1a1a1a",
                          }}
                        >
                          {currentMonth.getFullYear()}ë…„{" "}
                          {currentMonth.getMonth() + 1}ì›”
                        </div>

                        <button
                          onClick={goToCurrentMonth}
                          style={{
                            padding: "6px 16px",
                            background:
                              "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                            border: "none",
                            borderRadius: "8px",
                            fontSize: "13px",
                            fontWeight: "600",
                            cursor: "pointer",
                            color: "white",
                            boxShadow: "0 2px 8px rgba(102, 126, 234, 0.3)",
                          }}
                        >
                          ì´ë²ˆ ë‹¬
                        </button>
                      </div>

                      <button
                        onClick={goToNextMonth}
                        style={{
                          padding: "10px 20px",
                          background: "#f8f9fa",
                          border: "1px solid #e5e7eb",
                          borderRadius: "10px",
                          fontSize: "14px",
                          fontWeight: "600",
                          cursor: "pointer",
                          color: "#495057",
                          display: "flex",
                          alignItems: "center",
                          gap: "8px",
                        }}
                      >
                        ë‹¤ìŒ ë‹¬
                        <Icon name="chevronRight" size={18} />
                      </button>
                    </div>

                    {/* Month Calendar */}
                    <div
                      style={{
                        background: "white",
                        borderRadius: "12px",
                        overflow: "hidden",
                        boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
                        padding: "16px",
                      }}
                    >
                      {/* Day headers */}
                      <div
                        style={{
                          display: "grid",
                          gridTemplateColumns: "repeat(7, 1fr)",
                          marginBottom: "8px",
                        }}
                      >
                        {["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "].map(
                          (day, idx) => (
                            <div
                              key={idx}
                              style={{
                                textAlign: "center",
                                padding: "12px",
                                fontSize: "14px",
                                fontWeight: "600",
                                color:
                                  idx === 0
                                    ? "#ff4444"
                                    : idx === 6
                                    ? "#4444ff"
                                    : "#666",
                              }}
                            >
                              {day}
                            </div>
                          )
                        )}
                      </div>

                      {/* Calendar dates */}
                      <div
                        style={{
                          display: "grid",
                          gridTemplateColumns: "repeat(7, 1fr)",
                          gap: "4px",
                        }}
                      >
                        {getMonthDates(currentMonth).map(
                          ({ date, isCurrentMonth }, idx) => {
                            const tasks = getTasksForDate(date);
                            const isToday =
                              date.toDateString() === new Date().toDateString();

                            return (
                              <div
                                key={idx}
                                onClick={() =>
                                  isCurrentMonth && setSelectedDate(date)
                                }
                                style={{
                                  minHeight: "100px",
                                  padding: "8px",
                                  border: `2px solid ${
                                    isToday ? "#667eea" : "#e5e7eb"
                                  }`,
                                  borderRadius: "8px",
                                  cursor: isCurrentMonth
                                    ? "pointer"
                                    : "default",
                                  background: isCurrentMonth
                                    ? isToday
                                      ? "#f0f7ff"
                                      : "white"
                                    : "#fafafa",
                                  transition: "all 0.2s",
                                  opacity: isCurrentMonth ? 1 : 0.5,
                                }}
                                onMouseEnter={(e) => {
                                  if (isCurrentMonth) {
                                    e.currentTarget.style.borderColor =
                                      "#667eea";
                                    e.currentTarget.style.boxShadow =
                                      "0 2px 8px rgba(102, 126, 234, 0.2)";
                                  }
                                }}
                                onMouseLeave={(e) => {
                                  if (isCurrentMonth && !isToday) {
                                    e.currentTarget.style.borderColor =
                                      "#e5e7eb";
                                    e.currentTarget.style.boxShadow = "none";
                                  }
                                }}
                              >
                                <div
                                  style={{
                                    fontSize: "14px",
                                    fontWeight: isToday ? "700" : "500",
                                    color: isToday
                                      ? "#667eea"
                                      : isCurrentMonth
                                      ? "#1a1a1a"
                                      : "#999",
                                    marginBottom: "4px",
                                  }}
                                >
                                  {date.getDate()}
                                </div>
                                {/* í”„ë¡œì íŠ¸ ê¸°ê°„ í‘œì‹œ ë°” */}
                                {(() => {
                                  const projectsInRange = projects.filter((p) =>
                                    isDateInProjectRange(date, p)
                                  );
                                  return (
                                    projectsInRange.length > 0 && (
                                      <div
                                        style={{
                                          display: "flex",
                                          flexDirection: "column",
                                          gap: "2px",
                                          marginBottom: "4px",
                                        }}
                                      >
                                        {projectsInRange
                                          .slice(0, 2)
                                          .map((project) => (
                                            <div
                                              key={project.id}
                                              style={{
                                                height: "4px",
                                                background: project.color,
                                                borderRadius: "2px",
                                                width: "100%",
                                              }}
                                              title={`${
                                                project.name
                                              } (${formatDateRange(
                                                project.startDate,
                                                project.endDate
                                              )})`}
                                            />
                                          ))}
                                        {projectsInRange.length > 2 && (
                                          <div
                                            style={{
                                              fontSize: "8px",
                                              color: "#999",
                                              textAlign: "center",
                                            }}
                                          >
                                            +{projectsInRange.length - 2}
                                          </div>
                                        )}
                                      </div>
                                    )
                                  );
                                })()}
                                <div
                                  style={{
                                    display: "flex",
                                    flexDirection: "column",
                                    gap: "2px",
                                  }}
                                >
                                  {tasks
                                    .slice(0, 3)
                                    .map(({ project, ...task }) => (
                                      <div
                                        key={task.id}
                                        style={{
                                          fontSize: "10px",
                                          padding: "2px 4px",
                                          background: project.color,
                                          color: "white",
                                          borderRadius: "3px",
                                          overflow: "hidden",
                                          textOverflow: "ellipsis",
                                          whiteSpace: "nowrap",
                                          textDecoration:
                                            task.status === "completed"
                                              ? "line-through"
                                              : "none",
                                        }}
                                      >
                                        {task.description}
                                      </div>
                                    ))}
                                  {tasks.length > 3 && (
                                    <div
                                      style={{
                                        fontSize: "10px",
                                        color: "#666",
                                        textAlign: "center",
                                      }}
                                    >
                                      +{tasks.length - 3}
                                    </div>
                                  )}
                                </div>
                              </div>
                            );
                          }
                        )}
                      </div>
                    </div>
                  </div>
                ) : selectedDate ? (
                  // ì¼ì¼ ë·°
                  <div>
                    <div
                      style={{
                        background: "white",
                        padding: "20px 24px",
                        borderRadius: "12px",
                        marginBottom: "24px",
                        boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
                        display: "flex",
                        justifyContent: "space-between",
                        alignItems: "center",
                      }}
                    >
                      <div>
                        <h2
                          style={{
                            fontSize: "24px",
                            fontWeight: "700",
                            color: "#1a1a1a",
                            margin: 0,
                          }}
                        >
                          {selectedDate.toLocaleDateString("ko-KR", {
                            year: "numeric",
                            month: "long",
                            day: "numeric",
                            weekday: "long",
                          })}
                        </h2>
                        <p
                          style={{
                            fontSize: "14px",
                            color: "#666",
                            marginTop: "4px",
                          }}
                        >
                          ì¼ì¼ ìƒì„¸ ì¼ì •
                        </p>
                      </div>

                      <button
                        onClick={() => setSelectedDate(null)}
                        style={{
                          padding: "8px 16px",
                          background: "#f1f3f5",
                          border: "none",
                          borderRadius: "8px",
                          fontSize: "14px",
                          fontWeight: "600",
                          cursor: "pointer",
                          color: "#666",
                        }}
                      >
                        â† ìº˜ë¦°ë”ë¡œ
                      </button>
                    </div>

                    {/* Daily Schedule */}
                    <div
                      style={{
                        background: "white",
                        borderRadius: "12px",
                        overflow: "hidden",
                        boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
                      }}
                    >
                      {workHours.map((hour) => {
                        const hourTasks = projects.flatMap((project) => {
                          const dateStr = selectedDate
                            .toISOString()
                            .split("T")[0];
                          const projectTasks = (project.tasks || []).filter(
                            (t) => t.date === dateStr && t.hour === hour
                          );
                          return projectTasks.map((task) => ({
                            ...task,
                            project,
                          }));
                        });

                        return (
                          <div
                            key={hour}
                            style={{
                              borderBottom: "1px solid #e5e7eb",
                              padding: "16px 24px",
                            }}
                          >
                            <div
                              style={{
                                fontSize: "16px",
                                fontWeight: "600",
                                color: "#667eea",
                                marginBottom: "12px",
                              }}
                            >
                              {hour}:00
                            </div>

                            {hourTasks.length === 0 ? (
                              <div
                                style={{
                                  fontSize: "14px",
                                  color: "#999",
                                  fontStyle: "italic",
                                }}
                              >
                                ì˜ˆì •ëœ ì—…ë¬´ ì—†ìŒ
                              </div>
                            ) : (
                              <div
                                style={{
                                  display: "flex",
                                  flexDirection: "column",
                                  gap: "8px",
                                }}
                              >
                                {hourTasks.map(({ project, ...task }) => (
                                  <div
                                    key={task.id}
                                    style={{
                                      padding: "12px",
                                      background: `${project.color}15`,
                                      borderLeft: `4px solid ${project.color}`,
                                      borderRadius: "8px",
                                    }}
                                  >
                                    <div
                                      style={{
                                        display: "flex",
                                        justifyContent: "space-between",
                                        alignItems: "start",
                                        marginBottom: "8px",
                                      }}
                                    >
                                      <div style={{ flex: 1 }}>
                                        <div
                                          style={{
                                            fontSize: "12px",
                                            color: project.color,
                                            fontWeight: "600",
                                            marginBottom: "4px",
                                          }}
                                        >
                                          {project.name}
                                        </div>
                                        <div
                                          onClick={() =>
                                            updateTask(project.id, task.id, {
                                              status:
                                                task.status === "completed"
                                                  ? "pending"
                                                  : "completed",
                                            })
                                          }
                                          style={{
                                            fontSize: "15px",
                                            color: "#1a1a1a",
                                            cursor: "pointer",
                                            textDecoration:
                                              task.status === "completed"
                                                ? "line-through"
                                                : "none",
                                            opacity:
                                              task.status === "completed"
                                                ? 0.6
                                                : 1,
                                          }}
                                        >
                                          {task.description}
                                        </div>
                                        {task.memo && (
                                          <div
                                            style={{
                                              fontSize: "13px",
                                              color: "#666",
                                              marginTop: "8px",
                                              padding: "8px",
                                              background: "white",
                                              borderRadius: "4px",
                                            }}
                                          >
                                            ğŸ“ {task.memo}
                                          </div>
                                        )}
                                      </div>

                                      <div
                                        style={{
                                          display: "flex",
                                          gap: "4px",
                                        }}
                                      >
                                        <button
                                          onClick={() =>
                                            openMemoModal(project.id, task)
                                          }
                                          style={{
                                            background: "white",
                                            border: "1px solid #e5e7eb",
                                            borderRadius: "6px",
                                            cursor: "pointer",
                                            padding: "6px",
                                            display: "flex",
                                            alignItems: "center",
                                          }}
                                          title="ë©”ëª¨"
                                        >
                                          <Icon
                                            name="edit"
                                            size={14}
                                            color={project.color}
                                          />
                                        </button>
                                        <button
                                          onClick={() =>
                                            deleteTask(project.id, task.id)
                                          }
                                          style={{
                                            background: "white",
                                            border: "1px solid #e5e7eb",
                                            borderRadius: "6px",
                                            cursor: "pointer",
                                            padding: "6px",
                                            display: "flex",
                                            alignItems: "center",
                                          }}
                                          title="ì‚­ì œ"
                                        >
                                          <Icon
                                            name="trash"
                                            size={14}
                                            color="#ff4444"
                                          />
                                        </button>
                                      </div>
                                    </div>

                                    <div
                                      style={{
                                        fontSize: "11px",
                                        color: "#999",
                                      }}
                                    >
                                      ì‘ì„±: {task.createdBy}
                                    </div>
                                  </div>
                                ))}
                              </div>
                            )}
                          </div>
                        );
                      })}
                    </div>
                  </div>
                ) : (
                  // í”„ë¡œì íŠ¸ ì„ íƒ ì‹œ ì£¼ê°„ ìº˜ë¦°ë” (ê¸°ì¡´ ì½”ë“œ)
                  <div>
                    <div
                      style={{
                        background: "white",
                        padding: "20px 24px",
                        borderRadius: "12px",
                        marginBottom: "24px",
                        boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
                      }}
                    >
                      <div
                        style={{
                          display: "flex",
                          justifyContent: "space-between",
                          alignItems: "center",
                          marginBottom: "12px",
                        }}
                      >
                        <button
                          onClick={() => setSelectedProject(null)}
                          style={{
                            padding: "8px 16px",
                            background: "#f1f3f5",
                            border: "none",
                            borderRadius: "8px",
                            fontSize: "14px",
                            fontWeight: "600",
                            cursor: "pointer",
                            color: "#666",
                            display: "flex",
                            alignItems: "center",
                            gap: "6px",
                          }}
                        >
                          <Icon name="chevronLeft" size={16} />
                          ì „ì²´ ë³´ê¸°
                        </button>
                      </div>
                      <div
                        style={{
                          display: "flex",
                          alignItems: "center",
                          gap: "12px",
                        }}
                      >
                        <div
                          style={{
                            width: "12px",
                            height: "12px",
                            background: selectedProject.color,
                            borderRadius: "50%",
                          }}
                        />
                        <h2
                          style={{
                            fontSize: "24px",
                            fontWeight: "700",
                            color: "#1a1a1a",
                            margin: 0,
                          }}
                        >
                          {selectedProject.name}
                        </h2>
                        {selectedProject.assignee && (
                          <div
                            style={{
                              padding: "4px 12px",
                              background: "#f8f9fa",
                              borderRadius: "6px",
                              fontSize: "13px",
                              color: "#666",
                            }}
                          >
                            ë‹´ë‹¹: {selectedProject.assignee}
                          </div>
                        )}
                      </div>
                    </div>

                    {/* Week Navigation */}
                    <div
                      style={{
                        background: "white",
                        padding: "16px 24px",
                        borderRadius: "12px",
                        marginBottom: "16px",
                        boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
                        display: "flex",
                        alignItems: "center",
                        justifyContent: "space-between",
                      }}
                    >
                      <button
                        onClick={goToPreviousWeek}
                        style={{
                          padding: "10px 20px",
                          background: "#f8f9fa",
                          border: "1px solid #e5e7eb",
                          borderRadius: "10px",
                          fontSize: "14px",
                          fontWeight: "600",
                          cursor: "pointer",
                          color: "#495057",
                          display: "flex",
                          alignItems: "center",
                          gap: "8px",
                        }}
                      >
                        <Icon name="chevronLeft" size={18} />
                        ì´ì „ ì£¼
                      </button>

                      <div
                        style={{
                          display: "flex",
                          alignItems: "center",
                          gap: "16px",
                        }}
                      >
                        <div
                          style={{
                            fontSize: "16px",
                            fontWeight: "600",
                            color: "#1a1a1a",
                          }}
                        >
                          {currentWeek[0].toLocaleDateString("ko-KR", {
                            year: "numeric",
                            month: "long",
                            day: "numeric",
                          })}
                          {" ~ "}
                          {currentWeek[6].toLocaleDateString("ko-KR", {
                            month: "long",
                            day: "numeric",
                          })}
                        </div>

                        <button
                          onClick={goToCurrentWeek}
                          style={{
                            padding: "6px 16px",
                            background:
                              "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                            border: "none",
                            borderRadius: "8px",
                            fontSize: "13px",
                            fontWeight: "600",
                            cursor: "pointer",
                            color: "white",
                            boxShadow: "0 2px 8px rgba(102, 126, 234, 0.3)",
                          }}
                        >
                          ì´ë²ˆ ì£¼
                        </button>
                      </div>

                      <button
                        onClick={goToNextWeek}
                        style={{
                          padding: "10px 20px",
                          background: "#f8f9fa",
                          border: "1px solid #e5e7eb",
                          borderRadius: "10px",
                          fontSize: "14px",
                          fontWeight: "600",
                          cursor: "pointer",
                          color: "#495057",
                          display: "flex",
                          alignItems: "center",
                          gap: "8px",
                        }}
                      >
                        ë‹¤ìŒ ì£¼
                        <Icon name="chevronRight" size={18} />
                      </button>
                    </div>

                    {/* Week Calendar */}
                    <div
                      style={{
                        background: "white",
                        borderRadius: "12px",
                        overflow: "hidden",
                        boxShadow: "0 1px 3px rgba(0,0,0,0.05)",
                      }}
                    >
                      <div
                        style={{
                          display: "grid",
                          gridTemplateColumns: "80px repeat(7, 1fr)",
                          background: "#f8f9fa",
                          borderBottom: "2px solid #e5e7eb",
                        }}
                      >
                        <div
                          style={{
                            padding: "16px",
                            borderRight: "1px solid #e5e7eb",
                            fontSize: "13px",
                            fontWeight: "600",
                            color: "#666",
                          }}
                        >
                          ì‹œê°„
                        </div>
                        {currentWeek.map((date, idx) => {
                          const isToday =
                            date.toDateString() === new Date().toDateString();
                          const dayNames = [
                            "ì¼",
                            "ì›”",
                            "í™”",
                            "ìˆ˜",
                            "ëª©",
                            "ê¸ˆ",
                            "í† ",
                          ];

                          return (
                            <div
                              key={idx}
                              style={{
                                padding: "16px 8px",
                                textAlign: "center",
                                borderRight:
                                  idx < 6 ? "1px solid #e5e7eb" : "none",
                                background: isToday
                                  ? selectedProject.color
                                  : "transparent",
                                color: isToday ? "white" : "#1a1a1a",
                                cursor: "pointer",
                              }}
                              onClick={() => setSelectedDate(date)}
                            >
                              <div
                                style={{
                                  fontSize: "12px",
                                  fontWeight: "500",
                                  opacity: isToday ? 1 : 0.7,
                                  marginBottom: "4px",
                                }}
                              >
                                {dayNames[date.getDay()]}
                              </div>
                              <div
                                style={{
                                  fontSize: "16px",
                                  fontWeight: "700",
                                }}
                              >
                                {date.getDate()}
                              </div>
                            </div>
                          );
                        })}
                      </div>

                      {workHours.map((hour) => (
                        <div
                          key={hour}
                          style={{
                            display: "grid",
                            gridTemplateColumns: "80px repeat(7, 1fr)",
                            borderBottom: "1px solid #e5e7eb",
                          }}
                        >
                          <div
                            style={{
                              padding: "12px 16px",
                              borderRight: "1px solid #e5e7eb",
                              fontSize: "14px",
                              fontWeight: "500",
                              color: "#666",
                              background: "#fafafa",
                            }}
                          >
                            {hour}:00
                          </div>

                          {currentWeek.map((date, idx) => {
                            const tasks = getTasksForDateAndHour(
                              selectedProject.id,
                              date,
                              hour
                            );

                            return (
                              <div
                                key={idx}
                                onClick={() =>
                                  openTaskModal(selectedProject.id, date, hour)
                                }
                                style={{
                                  padding: "8px",
                                  borderRight:
                                    idx < 6 ? "1px solid #e5e7eb" : "none",
                                  minHeight: "60px",
                                  cursor: "pointer",
                                  background:
                                    tasks.length > 0
                                      ? `${selectedProject.color}10`
                                      : "white",
                                  position: "relative",
                                }}
                              >
                                {tasks.map((task) => (
                                  <div
                                    key={task.id}
                                    onClick={(e) => e.stopPropagation()}
                                    style={{
                                      position: "absolute",
                                      top: "8px",
                                      left: "8px",
                                      right: "8px",
                                      background: selectedProject.color,
                                      color: "white",
                                      padding: "6px 8px",
                                      borderRadius: "6px",
                                      fontSize: "12px",
                                      cursor: "default",
                                      height:
                                        task.startHour && task.endHour
                                          ? `${
                                              (task.endHour - task.startHour) *
                                                60 -
                                              16
                                            }px`
                                          : "auto",
                                      zIndex: 10,
                                    }}
                                  >
                                    <div
                                      style={{
                                        background: selectedProject.color,
                                        color: "white",
                                        padding: "6px 8px",
                                        borderRadius: "6px",
                                        fontSize: "12px",
                                        marginBottom: "4px",
                                        cursor: "default",
                                        minHeight:
                                          task.startHour && task.endHour
                                            ? `${
                                                (task.endHour -
                                                  task.startHour) *
                                                  60 -
                                                8
                                              }px`
                                            : "auto",
                                      }}
                                    >
                                      <div
                                        onClick={() => {
                                          const newStatus =
                                            task.status === "completed"
                                              ? "pending"
                                              : "completed";
                                          updateTask(
                                            selectedProject.id,
                                            task.id,
                                            { status: newStatus }
                                          );
                                        }}
                                        style={{
                                          flex: 1,
                                          textDecoration:
                                            task.status === "completed"
                                              ? "line-through"
                                              : "none",
                                          opacity:
                                            task.status === "completed"
                                              ? 0.7
                                              : 1,
                                          cursor: "pointer",
                                          wordBreak: "break-word",
                                        }}
                                      >
                                        {task.description}
                                        {task.memo && (
                                          <div
                                            style={{
                                              fontSize: "10px",
                                              marginTop: "2px",
                                              opacity: 0.8,
                                            }}
                                          >
                                            ğŸ“
                                          </div>
                                        )}
                                      </div>
                                      <div
                                        style={{ display: "flex", gap: "2px" }}
                                      >
                                        <button
                                          onClick={() =>
                                            openMemoModal(
                                              selectedProject.id,
                                              task
                                            )
                                          }
                                          style={{
                                            background: "rgba(255,255,255,0.2)",
                                            border: "none",
                                            borderRadius: "4px",
                                            cursor: "pointer",
                                            padding: "2px",
                                            display: "flex",
                                          }}
                                        >
                                          <Icon name="edit" size={10} />
                                        </button>
                                        <button
                                          onClick={() =>
                                            deleteTask(
                                              selectedProject.id,
                                              task.id
                                            )
                                          }
                                          style={{
                                            background: "rgba(255,255,255,0.2)",
                                            border: "none",
                                            borderRadius: "4px",
                                            cursor: "pointer",
                                            padding: "2px",
                                            display: "flex",
                                          }}
                                        >
                                          <Icon name="trash" size={10} />
                                        </button>
                                      </div>
                                    </div>
                                    {task.createdBy && (
                                      <div
                                        style={{
                                          fontSize: "10px",
                                          opacity: 0.8,
                                          marginTop: "2px",
                                        }}
                                      >
                                        {task.createdBy}
                                      </div>
                                    )}
                                  </div>
                                ))}
                              </div>
                            );
                          })}
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            </div>

            {/* Modals */}
            {showProjectModal && (
              <div
                style={{
                  position: "fixed",
                  top: 0,
                  left: 0,
                  right: 0,
                  bottom: 0,
                  background: "rgba(0,0,0,0.5)",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  zIndex: 1000,
                  animation: "fadeIn 0.2s",
                }}
                onClick={() => setShowProjectModal(false)}
              >
                <div
                  style={{
                    background: "white",
                    borderRadius: "16px",
                    padding: "32px",
                    maxWidth: "480px",
                    width: "90%",
                    boxShadow: "0 20px 60px rgba(0,0,0,0.3)",
                    animation: "slideUp 0.3s",
                  }}
                  onClick={(e) => e.stopPropagation()}
                >
                  <h2
                    style={{
                      fontSize: "24px",
                      fontWeight: "700",
                      marginBottom: "8px",
                      color: "#1a1a1a",
                    }}
                  >
                    ìƒˆ í”„ë¡œì íŠ¸ ì¶”ê°€
                  </h2>
                  <p
                    style={{
                      color: "#666",
                      marginBottom: "24px",
                      fontSize: "14px",
                    }}
                  >
                    í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”
                  </p>

                  <input
                    type="text"
                    value={newProjectName}
                    onChange={(e) => setNewProjectName(e.target.value)}
                    onKeyPress={(e) => e.key === "Enter" && handleAddProject()}
                    placeholder="ì˜ˆ: ì›¹ì‚¬ì´íŠ¸ ë¦¬ë‰´ì–¼"
                    autoFocus
                    style={{
                      width: "100%",
                      padding: "14px 16px",
                      border: "2px solid #e0e0e0",
                      borderRadius: "12px",
                      fontSize: "16px",
                      marginBottom: "24px",
                      outline: "none",
                    }}
                  />
                  <div style={{ marginBottom: "16px" }}>
                    <label
                      style={{
                        display: "block",
                        marginBottom: "8px",
                        fontWeight: "600",
                        color: "#333",
                        fontSize: "14px",
                      }}
                    >
                      ê¸°ê´€
                    </label>
                    <input
                      type="text"
                      value={newProjectOrganization}
                      onChange={(e) =>
                        setNewProjectOrganization(e.target.value)
                      }
                      placeholder="ì˜ˆ: ë””ìì¸íŒ€"
                      style={{
                        width: "100%",
                        padding: "14px 16px",
                        border: "2px solid #e0e0e0",
                        borderRadius: "12px",
                        fontSize: "16px",
                        outline: "none",
                      }}
                    />
                  </div>

                  <div style={{ marginBottom: "16px" }}>
                    <label
                      style={{
                        display: "block",
                        marginBottom: "8px",
                        fontWeight: "600",
                        color: "#333",
                        fontSize: "14px",
                      }}
                    >
                      ë‹´ë‹¹ì
                    </label>
                    <input
                      type="text"
                      value={newProjectAssignee}
                      onChange={(e) => setNewProjectAssignee(e.target.value)}
                      placeholder="ì˜ˆ: ê¹€ì² ìˆ˜"
                      style={{
                        width: "100%",
                        padding: "14px 16px",
                        border: "2px solid #e0e0e0",
                        borderRadius: "12px",
                        fontSize: "16px",
                        outline: "none",
                      }}
                    />
                  </div>

                  <div
                    style={{
                      display: "grid",
                      gridTemplateColumns: "1fr 1fr",
                      gap: "12px",
                      marginBottom: "24px",
                    }}
                  >
                    <div>
                      <label
                        style={{
                          display: "block",
                          marginBottom: "8px",
                          fontWeight: "600",
                          color: "#333",
                          fontSize: "14px",
                        }}
                      >
                        ì‹œì‘ì¼
                      </label>
                      <input
                        type="date"
                        value={newProjectStartDate}
                        onChange={(e) => setNewProjectStartDate(e.target.value)}
                        style={{
                          width: "100%",
                          padding: "14px 16px",
                          border: "2px solid #e0e0e0",
                          borderRadius: "12px",
                          fontSize: "16px",
                          outline: "none",
                        }}
                      />
                    </div>

                    <div>
                      <label
                        style={{
                          display: "block",
                          marginBottom: "8px",
                          fontWeight: "600",
                          color: "#333",
                          fontSize: "14px",
                        }}
                      >
                        ì¢…ë£Œì¼
                      </label>
                      <input
                        type="date"
                        value={newProjectEndDate}
                        onChange={(e) => setNewProjectEndDate(e.target.value)}
                        style={{
                          width: "100%",
                          padding: "14px 16px",
                          border: "2px solid #e0e0e0",
                          borderRadius: "12px",
                          fontSize: "16px",
                          outline: "none",
                        }}
                      />
                    </div>
                  </div>
                  <div
                    style={{
                      display: "flex",
                      gap: "12px",
                      justifyContent: "flex-end",
                    }}
                  >
                    <button
                      onClick={() => setShowProjectModal(false)}
                      style={{
                        padding: "12px 24px",
                        background: "#f1f3f5",
                        border: "none",
                        borderRadius: "10px",
                        fontSize: "15px",
                        fontWeight: "600",
                        cursor: "pointer",
                        color: "#666",
                      }}
                    >
                      ì·¨ì†Œ
                    </button>
                    <button
                      onClick={handleAddProject}
                      disabled={!newProjectName.trim()}
                      style={{
                        padding: "12px 24px",
                        background: newProjectName.trim()
                          ? "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
                          : "#e0e0e0",
                        border: "none",
                        borderRadius: "10px",
                        fontSize: "15px",
                        fontWeight: "600",
                        cursor: newProjectName.trim()
                          ? "pointer"
                          : "not-allowed",
                        color: "white",
                        boxShadow: newProjectName.trim()
                          ? "0 4px 12px rgba(102, 126, 234, 0.3)"
                          : "none",
                      }}
                    >
                      ì¶”ê°€í•˜ê¸°
                    </button>
                  </div>
                </div>
              </div>
            )}
            {/* í”„ë¡œì íŠ¸ í¸ì§‘ ëª¨ë‹¬ */}
            {showEditProjectModal && (
              <div
                style={{
                  position: "fixed",
                  top: 0,
                  left: 0,
                  right: 0,
                  bottom: 0,
                  background: "rgba(0,0,0,0.5)",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  zIndex: 1000,
                  animation: "fadeIn 0.2s",
                }}
                onClick={() => setShowEditProjectModal(false)}
              >
                <div
                  style={{
                    background: "white",
                    borderRadius: "16px",
                    padding: "32px",
                    maxWidth: "500px",
                    width: "90%",
                    maxHeight: "90vh",
                    overflowY: "auto",
                    boxShadow: "0 20px 60px rgba(0,0,0,0.3)",
                    animation: "slideUp 0.3s",
                  }}
                  onClick={(e) => e.stopPropagation()}
                >
                  <h2
                    style={{
                      fontSize: "24px",
                      fontWeight: "700",
                      marginBottom: "8px",
                      color: "#1a1a1a",
                    }}
                  >
                    í”„ë¡œì íŠ¸ ìˆ˜ì •
                  </h2>
                  <p
                    style={{
                      color: "#666",
                      marginBottom: "24px",
                      fontSize: "14px",
                    }}
                  >
                    í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”
                  </p>

                  <div style={{ marginBottom: "16px" }}>
                    <label
                      style={{
                        display: "block",
                        marginBottom: "8px",
                        fontWeight: "600",
                        color: "#333",
                        fontSize: "14px",
                      }}
                    >
                      í”„ë¡œì íŠ¸ ì´ë¦„ *
                    </label>
                    <input
                      type="text"
                      value={newProjectName}
                      onChange={(e) => setNewProjectName(e.target.value)}
                      placeholder="ì˜ˆ: ì›¹ì‚¬ì´íŠ¸ ë¦¬ë‰´ì–¼"
                      autoFocus
                      style={{
                        width: "100%",
                        padding: "12px 14px",
                        border: "2px solid #e0e0e0",
                        borderRadius: "10px",
                        fontSize: "15px",
                        outline: "none",
                      }}
                    />
                  </div>

                  <div style={{ marginBottom: "16px" }}>
                    <label
                      style={{
                        display: "block",
                        marginBottom: "8px",
                        fontWeight: "600",
                        color: "#333",
                        fontSize: "14px",
                      }}
                    >
                      ê¸°ê´€
                    </label>
                    <input
                      type="text"
                      value={newProjectOrganization}
                      onChange={(e) =>
                        setNewProjectOrganization(e.target.value)
                      }
                      placeholder="ì˜ˆ: ë””ìì¸íŒ€"
                      style={{
                        width: "100%",
                        padding: "12px 14px",
                        border: "2px solid #e0e0e0",
                        borderRadius: "10px",
                        fontSize: "15px",
                        outline: "none",
                      }}
                    />
                  </div>

                  <div style={{ marginBottom: "16px" }}>
                    <label
                      style={{
                        display: "block",
                        marginBottom: "8px",
                        fontWeight: "600",
                        color: "#333",
                        fontSize: "14px",
                      }}
                    >
                      ë‹´ë‹¹ì
                    </label>
                    <input
                      type="text"
                      value={newProjectAssignee}
                      onChange={(e) => setNewProjectAssignee(e.target.value)}
                      placeholder="ì˜ˆ: ê¹€ì² ìˆ˜"
                      style={{
                        width: "100%",
                        padding: "12px 14px",
                        border: "2px solid #e0e0e0",
                        borderRadius: "10px",
                        fontSize: "15px",
                        outline: "none",
                      }}
                    />
                  </div>

                  <div
                    style={{
                      display: "grid",
                      gridTemplateColumns: "1fr 1fr",
                      gap: "12px",
                      marginBottom: "24px",
                    }}
                  >
                    <div>
                      <label
                        style={{
                          display: "block",
                          marginBottom: "8px",
                          fontWeight: "600",
                          color: "#333",
                          fontSize: "14px",
                        }}
                      >
                        ì‹œì‘ì¼
                      </label>
                      <input
                        type="date"
                        value={newProjectStartDate}
                        onChange={(e) => setNewProjectStartDate(e.target.value)}
                        style={{
                          width: "100%",
                          padding: "12px 14px",
                          border: "2px solid #e0e0e0",
                          borderRadius: "10px",
                          fontSize: "15px",
                          outline: "none",
                        }}
                      />
                    </div>

                    <div>
                      <label
                        style={{
                          display: "block",
                          marginBottom: "8px",
                          fontWeight: "600",
                          color: "#333",
                          fontSize: "14px",
                        }}
                      >
                        ì¢…ë£Œì¼
                      </label>
                      <input
                        type="date"
                        value={newProjectEndDate}
                        onChange={(e) => setNewProjectEndDate(e.target.value)}
                        style={{
                          width: "100%",
                          padding: "12px 14px",
                          border: "2px solid #e0e0e0",
                          borderRadius: "10px",
                          fontSize: "15px",
                          outline: "none",
                        }}
                      />
                    </div>
                  </div>

                  <div
                    style={{
                      display: "flex",
                      gap: "12px",
                      justifyContent: "flex-end",
                    }}
                  >
                    <button
                      onClick={() => setShowEditProjectModal(false)}
                      style={{
                        padding: "12px 24px",
                        background: "#f1f3f5",
                        border: "none",
                        borderRadius: "10px",
                        fontSize: "15px",
                        fontWeight: "600",
                        cursor: "pointer",
                        color: "#666",
                      }}
                    >
                      ì·¨ì†Œ
                    </button>
                    <button
                      onClick={handleEditProject}
                      disabled={!newProjectName.trim()}
                      style={{
                        padding: "12px 24px",
                        background: newProjectName.trim()
                          ? "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
                          : "#e0e0e0",
                        border: "none",
                        borderRadius: "10px",
                        fontSize: "15px",
                        fontWeight: "600",
                        cursor: newProjectName.trim()
                          ? "pointer"
                          : "not-allowed",
                        color: "white",
                        boxShadow: newProjectName.trim()
                          ? "0 4px 12px rgba(102, 126, 234, 0.3)"
                          : "none",
                      }}
                    >
                      ìˆ˜ì •í•˜ê¸°
                    </button>
                  </div>
                </div>
              </div>
            )}
            {showTaskModal && taskModalData && (
              <div
                style={{
                  position: "fixed",
                  top: 0,
                  left: 0,
                  right: 0,
                  bottom: 0,
                  background: "rgba(0,0,0,0.5)",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  zIndex: 1000,
                  animation: "fadeIn 0.2s",
                }}
                onClick={() => setShowTaskModal(false)}
              >
                <div
                  style={{
                    background: "white",
                    borderRadius: "16px",
                    padding: "32px",
                    maxWidth: "480px",
                    width: "90%",
                    boxShadow: "0 20px 60px rgba(0,0,0,0.3)",
                    animation: "slideUp 0.3s",
                  }}
                  onClick={(e) => e.stopPropagation()}
                >
                  <h2
                    style={{
                      fontSize: "24px",
                      fontWeight: "700",
                      marginBottom: "8px",
                      color: "#1a1a1a",
                    }}
                  >
                    ìƒˆ ì—…ë¬´ ì¶”ê°€
                  </h2>
                  <p
                    style={{
                      color: "#666",
                      marginBottom: "24px",
                      fontSize: "14px",
                    }}
                  >
                    {taskModalData.date.toLocaleDateString("ko-KR", {
                      month: "long",
                      day: "numeric",
                    })}{" "}
                    {taskModalData.hour}:00
                  </p>
                  <div
                    style={{
                      display: "grid",
                      gridTemplateColumns: "1fr 1fr",
                      gap: "12px",
                      marginBottom: "16px",
                    }}
                  >
                    <div>
                      <label
                        style={{
                          display: "block",
                          marginBottom: "8px",
                          fontWeight: "600",
                          color: "#333",
                          fontSize: "14px",
                        }}
                      >
                        ì‹œì‘ ì‹œê°„
                      </label>
                      <select
                        value={taskStartHour}
                        onChange={(e) => {
                          const newStart = parseInt(e.target.value);
                          setTaskStartHour(newStart);
                          if (taskEndHour <= newStart) {
                            setTaskEndHour(newStart + 1);
                          }
                        }}
                        style={{
                          width: "100%",
                          padding: "12px 14px",
                          border: "2px solid #e0e0e0",
                          borderRadius: "10px",
                          fontSize: "15px",
                          outline: "none",
                        }}
                      >
                        {workHours.map((hour) => (
                          <option key={hour} value={hour}>
                            {hour}:00
                          </option>
                        ))}
                      </select>
                    </div>

                    <div>
                      <label
                        style={{
                          display: "block",
                          marginBottom: "8px",
                          fontWeight: "600",
                          color: "#333",
                          fontSize: "14px",
                        }}
                      >
                        ì¢…ë£Œ ì‹œê°„
                      </label>
                      <select
                        value={taskEndHour}
                        onChange={(e) =>
                          setTaskEndHour(parseInt(e.target.value))
                        }
                        style={{
                          width: "100%",
                          padding: "12px 14px",
                          border: "2px solid #e0e0e0",
                          borderRadius: "10px",
                          fontSize: "15px",
                          outline: "none",
                        }}
                      >
                        {workHours
                          .filter((hour) => hour > taskStartHour)
                          .map((hour) => (
                            <option key={hour} value={hour}>
                              {hour}:00
                            </option>
                          ))}
                        <option value={18}>18:00</option>
                      </select>
                    </div>
                  </div>
                  <textarea
                    value={newTaskDescription}
                    onChange={(e) => setNewTaskDescription(e.target.value)}
                    placeholder="ì—…ë¬´ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
                    autoFocus
                    style={{
                      width: "100%",
                      padding: "14px 16px",
                      border: "2px solid #e0e0e0",
                      borderRadius: "12px",
                      fontSize: "16px",
                      marginBottom: "24px",
                      outline: "none",
                      minHeight: "120px",
                      resize: "vertical",
                      fontFamily: "inherit",
                    }}
                  />

                  <div
                    style={{
                      display: "flex",
                      gap: "12px",
                      justifyContent: "flex-end",
                    }}
                  >
                    <button
                      onClick={() => setShowTaskModal(false)}
                      style={{
                        padding: "12px 24px",
                        background: "#f1f3f5",
                        border: "none",
                        borderRadius: "10px",
                        fontSize: "15px",
                        fontWeight: "600",
                        cursor: "pointer",
                        color: "#666",
                      }}
                    >
                      ì·¨ì†Œ
                    </button>
                    <button
                      onClick={handleAddTask}
                      disabled={!newTaskDescription.trim()}
                      style={{
                        padding: "12px 24px",
                        background: newTaskDescription.trim()
                          ? "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
                          : "#e0e0e0",
                        border: "none",
                        borderRadius: "10px",
                        fontSize: "15px",
                        fontWeight: "600",
                        cursor: newTaskDescription.trim()
                          ? "pointer"
                          : "not-allowed",
                        color: "white",
                        boxShadow: newTaskDescription.trim()
                          ? "0 4px 12px rgba(102, 126, 234, 0.3)"
                          : "none",
                      }}
                    >
                      ì¶”ê°€í•˜ê¸°
                    </button>
                  </div>
                </div>
              </div>
            )}

            {showMemoModal && selectedTask && (
              <div
                style={{
                  position: "fixed",
                  top: 0,
                  left: 0,
                  right: 0,
                  bottom: 0,
                  background: "rgba(0,0,0,0.5)",
                  display: "flex",
                  alignItems: "center",
                  justifyContent: "center",
                  zIndex: 1000,
                  animation: "fadeIn 0.2s",
                }}
                onClick={() => setShowMemoModal(false)}
              >
                <div
                  style={{
                    background: "white",
                    borderRadius: "16px",
                    padding: "32px",
                    maxWidth: "480px",
                    width: "90%",
                    boxShadow: "0 20px 60px rgba(0,0,0,0.3)",
                    animation: "slideUp 0.3s",
                  }}
                  onClick={(e) => e.stopPropagation()}
                >
                  <h2
                    style={{
                      fontSize: "24px",
                      fontWeight: "700",
                      marginBottom: "8px",
                      color: "#1a1a1a",
                    }}
                  >
                    ì—…ë¬´ ë©”ëª¨
                  </h2>
                  <p
                    style={{
                      color: "#666",
                      marginBottom: "8px",
                      fontSize: "14px",
                    }}
                  >
                    {selectedTask.task.description}
                  </p>
                  <p
                    style={{
                      color: "#999",
                      marginBottom: "24px",
                      fontSize: "12px",
                    }}
                  >
                    ì¶”ê°€ ë©”ëª¨ë‚˜ ì°¸ê³ ì‚¬í•­ì„ ì…ë ¥í•˜ì„¸ìš”
                  </p>

                  <textarea
                    value={taskMemo}
                    onChange={(e) => setTaskMemo(e.target.value)}
                    placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
                    autoFocus
                    style={{
                      width: "100%",
                      padding: "14px 16px",
                      border: "2px solid #e0e0e0",
                      borderRadius: "12px",
                      fontSize: "16px",
                      marginBottom: "24px",
                      outline: "none",
                      minHeight: "150px",
                      resize: "vertical",
                      fontFamily: "inherit",
                    }}
                  />

                  <div
                    style={{
                      display: "flex",
                      gap: "12px",
                      justifyContent: "flex-end",
                    }}
                  >
                    <button
                      onClick={() => setShowMemoModal(false)}
                      style={{
                        padding: "12px 24px",
                        background: "#f1f3f5",
                        border: "none",
                        borderRadius: "10px",
                        fontSize: "15px",
                        fontWeight: "600",
                        cursor: "pointer",
                        color: "#666",
                      }}
                    >
                      ì·¨ì†Œ
                    </button>
                    <button
                      onClick={handleSaveMemo}
                      style={{
                        padding: "12px 24px",
                        background:
                          "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                        border: "none",
                        borderRadius: "10px",
                        fontSize: "15px",
                        fontWeight: "600",
                        cursor: "pointer",
                        color: "white",
                        boxShadow: "0 4px 12px rgba(102, 126, 234, 0.3)",
                      }}
                    >
                      ì €ì¥
                    </button>
                  </div>
                </div>
              </div>
            )}

            {/* ëª¨ë°”ì¼ í”„ë¡œì íŠ¸ ëª©ë¡ ëª¨ë‹¬ */}
            {isMobile && showMobileProjectList && (
              <div
                style={{
                  position: "fixed",
                  top: 0,
                  left: 0,
                  right: 0,
                  bottom: 0,
                  background: "rgba(0,0,0,0.5)",
                  display: "flex",
                  alignItems: "flex-end",
                  justifyContent: "center",
                  zIndex: 2000,
                  animation: "fadeIn 0.2s",
                }}
                onClick={() => setShowMobileProjectList(false)}
              >
                <div
                  style={{
                    background: "white",
                    borderRadius: "16px 16px 0 0",
                    padding: "24px",
                    width: "100%",
                    maxHeight: "80vh",
                    overflowY: "auto",
                    boxShadow: "0 -4px 20px rgba(0,0,0,0.1)",
                    animation: "slideUp 0.3s",
                  }}
                  onClick={(e) => e.stopPropagation()}
                >
                  <div
                    style={{
                      display: "flex",
                      justifyContent: "space-between",
                      alignItems: "center",
                      marginBottom: "20px",
                    }}
                  >
                    <h2
                      style={{
                        fontSize: "20px",
                        fontWeight: "700",
                        color: "#1a1a1a",
                        margin: 0,
                      }}
                    >
                      í”„ë¡œì íŠ¸ ì„ íƒ
                    </h2>
                    <button
                      onClick={() => setShowMobileProjectList(false)}
                      style={{
                        background: "none",
                        border: "none",
                        cursor: "pointer",
                        padding: "8px",
                      }}
                    >
                      <Icon name="x" size={24} color="#666" />
                    </button>
                  </div>

                  {/* í”„ë¡œì íŠ¸ ì¶”ê°€ ë²„íŠ¼ */}
                  <button
                    onClick={() => {
                      setShowMobileProjectList(false);
                      addProject();
                    }}
                    style={{
                      width: "100%",
                      padding: "12px 16px",
                      background:
                        "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
                      color: "white",
                      border: "none",
                      borderRadius: "10px",
                      fontSize: "15px",
                      fontWeight: "600",
                      cursor: "pointer",
                      display: "flex",
                      alignItems: "center",
                      justifyContent: "center",
                      gap: "8px",
                      marginBottom: "16px",
                      boxShadow: "0 2px 8px rgba(102, 126, 234, 0.3)",
                    }}
                  >
                    <Icon name="plus" size={18} />ìƒˆ í”„ë¡œì íŠ¸ ì¶”ê°€
                  </button>

                  {projects.length === 0 ? (
                    <div
                      style={{
                        padding: "40px 20px",
                        textAlign: "center",
                        color: "#999",
                      }}
                    >
                      <p>í”„ë¡œì íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”</p>
                    </div>
                  ) : (
                    <div
                      style={{
                        display: "flex",
                        flexDirection: "column",
                        gap: "12px",
                      }}
                    >
                      {projects.map((project) => {
                        const progress = getProjectProgress(project);

                        return (
                          <div
                            key={project.id}
                            onClick={() => {
                              setSelectedProject(project);
                              setShowMobileProjectList(false);
                            }}
                            style={{
                              padding: "16px",
                              background: "white",
                              border: `2px solid ${project.color}`,
                              borderRadius: "12px",
                              cursor: "pointer",
                            }}
                          >
                            <div style={{ marginBottom: "12px" }}>
                              <div
                                style={{
                                  display: "flex",
                                  alignItems: "center",
                                  gap: "8px",
                                  marginBottom: "8px",
                                }}
                              >
                                <div
                                  style={{
                                    width: "8px",
                                    height: "8px",
                                    background: project.color,
                                    borderRadius: "50%",
                                  }}
                                />
                                <h3
                                  style={{
                                    fontSize: "16px",
                                    fontWeight: "600",
                                    color: "#1a1a1a",
                                    margin: 0,
                                  }}
                                >
                                  {project.name}
                                </h3>
                              </div>

                              {project.organization && (
                                <div
                                  style={{
                                    fontSize: "13px",
                                    color: "#666",
                                    marginBottom: "4px",
                                  }}
                                >
                                  <Icon
                                    name="briefcase"
                                    size={12}
                                    style={{
                                      marginRight: "4px",
                                      verticalAlign: "middle",
                                    }}
                                  />
                                  {project.organization}
                                </div>
                              )}

                              {project.assignee && (
                                <div
                                  style={{
                                    fontSize: "13px",
                                    color: "#666",
                                    marginBottom: "4px",
                                  }}
                                >
                                  <Icon
                                    name="user"
                                    size={12}
                                    style={{
                                      marginRight: "4px",
                                      verticalAlign: "middle",
                                    }}
                                  />
                                  {project.assignee}
                                </div>
                              )}

                              {project.startDate && project.endDate && (
                                <div style={{ fontSize: "12px", color: "#666" }}>
                                  <Icon
                                    name="calendar"
                                    size={12}
                                    style={{
                                      marginRight: "4px",
                                      verticalAlign: "middle",
                                    }}
                                  />
                                  {formatDateRange(
                                    project.startDate,
                                    project.endDate
                                  )}
                                </div>
                              )}
                            </div>

                            <div>
                              <div
                                style={{
                                  display: "flex",
                                  justifyContent: "space-between",
                                  fontSize: "12px",
                                  color: "#666",
                                  marginBottom: "6px",
                                }}
                              >
                                <span>ì§„í–‰ë¥ </span>
                                <span style={{ fontWeight: "600" }}>
                                  {progress}%
                                </span>
                              </div>
                              <div
                                style={{
                                  height: "6px",
                                  background: "#e5e7eb",
                                  borderRadius: "3px",
                                  overflow: "hidden",
                                }}
                              >
                                <div
                                  style={{
                                    width: `${progress}%`,
                                    height: "100%",
                                    background: project.color,
                                    transition: "width 0.3s",
                                  }}
                                />
                              </div>
                            </div>

                            <div
                              style={{
                                marginTop: "8px",
                                fontSize: "12px",
                                color: "#999",
                              }}
                            >
                              {project.tasks?.length || 0}ê°œ ì—…ë¬´
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  )}
                </div>
              </div>
            )}
          </div>
        );
      };

      ReactDOM.render(<DailyPlanner />, document.getElementById("root"));

      // Service Worker ë“±ë¡
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/daily-planner/sw.js")
            .then((registration) => {
              console.log("Service Worker ë“±ë¡ ì„±ê³µ:", registration);
            })
            .catch((error) => {
              console.log("Service Worker ë“±ë¡ ì‹¤íŒ¨:", error);
            });
        });
      }
    </script>
  </body>
</html>
